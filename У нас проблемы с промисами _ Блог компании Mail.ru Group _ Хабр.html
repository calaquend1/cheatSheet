<!DOCTYPE html>
<!-- saved from url=(0047)https://habr.com/ru/company/mailru/blog/269465/ -->
<html lang="ru" class="no-js fonts-loaded"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
<meta content="width=1024" name="viewport">
<title>У нас проблемы с промисами / Блог компании Mail.ru Group / Хабр</title>

  <meta name="description" content="Разрешите представить вам перевод статьи Нолана Лоусона «У нас проблемы с промисами», одной из лучших по теме из тех, что мне доводилось читать.

У нас проблемы с промисами
Дорогие JavaScript...">

  <meta name="keywords" content="javascript, promise, promises/a+, es6, node.js, nodejs">

  <meta property="fb:app_id" content="444736788986613">
<meta property="og:type" content="article">
<meta property="fb:pages" content="472597926099084">
<meta property="og:url" content="https://habr.com/ru/company/mailru/blog/269465/">
<meta property="og:title" content="У нас проблемы с промисами">

    <meta property="og:image" content="https://habr.com/share/post/269465/2fc850541838fde60a90135c28c0ed10/?v=1">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link rel="image_src" href="https://habr.com/share/post/269465/2fc850541838fde60a90135c28c0ed10/?v=1">
    <meta name="twitter:image" content="https://habr.com/share/post/269465/2fc850541838fde60a90135c28c0ed10/?v=1">
      <meta property="vk:image" content="https://habr.com/share/post/269465/2fc850541838fde60a90135c28c0ed10/?format=vk&amp;v=1">

<meta property="og:description" content="Разрешите представить вам перевод статьи Нолана Лоусона «У нас проблемы с промисами», одной из лучших по теме из тех, что мне доводилось читать.  У нас проблемы...">
<meta name="twitter:description" content="Разрешите представить вам перевод статьи Нолана Лоусона «У нас проблемы с промисами», одной из лучших по теме из тех, что мне доводилось читать.  У нас проблемы...">
<meta name="twitter:title" content="У нас проблемы с промисами">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@habr_com">

  <meta property="al:android:url" content="habrahabr://post/269465">
<meta property="al:android:app_name" content="Habrahabr">
<meta property="al:android:package" content="ru.habrahabr">
<meta property="al:windows_phone:url" content="habrahabr://post/269465">
<meta property="al:windows_phone:app_name" content="Habrahabr">
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060">

  <link rel="canonical" href="https://habr.com/ru/company/mailru/blog/269465/">
  <link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.habr.com/ru/company/mailru/blog/269465/">

  <script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/inferredEvents.js.Без названия" async=""></script><script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/317458588730613" async=""></script><script async="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/fbevents.js.Без названия"></script><script type="text/javascript" async="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/watch.js.Без названия"></script><script type="text/javascript" async="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/js"></script><script async="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/analytics.js.Без названия"></script><script type="text/javascript" async="" defer="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/saved_resource" charset="UTF-8"></script><script type="application/ld+json">
    {
    "@context": "http:\/\/schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/habr.com\/ru\/company\/mailru\/blog\/269465\/"
    },
    "headline": "У нас проблемы с промисами",
    "datePublished": "2015-10-26T08:50:30+03:00",
    "dateModified": "2016-05-12T21:31:10+03:00",
    "author": {
        "@type": "Person",
        "name": "Павел Рыбин"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Habr",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/dr.habracdn.net\/habrcom\/images\/habr_google.png"
        }
    },
    "description": "Разрешите представить вам перевод статьи Нолана Лоусона &laquo;У нас проблемы с промисами&raquo;, одной из лучших по теме из тех, что мне доводилось читать.  У нас проблемы...",
    "image": [
        "https:\/\/habr.com\/share\/post\/269465\/2fc850541838fde60a90135c28c0ed10\/"
    ]
}
  </script>


<meta name="yandex-verification" content="71593b225aeafc4e">
<meta name="referrer" content="unsafe-url">
<meta name="pocket-site-verification" content="ed24b2b9721edf0a282c5b4a3232c4">


<style type="text/css">
  @font-face{font-family:'Fira Sans';font-style:normal;font-weight:500;src:url(/fonts/0/FiraSans/firaSans-medium.eot);src:local("Fira Sans Medium"),local("FiraSans-Medium"),url(/fonts/0/FiraSans/firaSans-medium.eot?#iefix) format("embedded-opentype"),url(/fonts/0/FiraSans/firaSans-medium.woff2) format("woff2"),url(/fonts/0/FiraSans/firaSans-medium.woff) format("woff"),url(/fonts/0/FiraSans/firaSans-medium.ttf) format("truetype")}
</style>

<link href="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/main.bundle.css" rel="stylesheet" media="all">





<meta name="yandex-verification" content="67d46b975fa41645">

<link rel="apple-touch-icon" sizes="180x180" href="https://habr.com/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://habr.com/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://habr.com/images/favicon-16x16.png">
<link rel="manifest" href="https://habr.com/site.webmanifest">
<link rel="mask-icon" href="https://habr.com/images/safari-pinned-tab.svg" color="#77a2b6">
<meta name="application-name" content="Хабр">
<meta name="msapplication-TileColor" content="#77a2b6">
<meta name="theme-color" content="#77a2b6">


  <link title="Комментарии к публикации «У нас проблемы с промисами»" type="application/rss+xml" rel="alternate" href="https://habr.com/ru/rss/post/269465/">

<script>/* Font Face Observer v2.0.13 - © Bram Stein. License: BSD-3-Clause */(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());

(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

(function( w ){
if( w.document.documentElement.className.indexOf( "fonts-loaded" ) > -1 ){ return; }

var html = document.documentElement;
var FS500 = new w.FontFaceObserver("Fira Sans", { weight: 500 });

FS500.load().then(function() {
html.classList.add('fonts-loaded');
sessionStorage.fontsLoaded = true;
console.log('FS500-loaded');
}).catch(function () {
sessionStorage.fontsLoaded = false;
console.log('FS500-unloaded');
});

if (sessionStorage.fontsLoaded) {
html.classList.add('fonts-loaded');
}
}(this));
</script>
<script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/jquery-1.8.3.min.js.Без названия"></script>
<script>
  window.create_callback_for_blocked = function(key) {
    return function() {
      googletag.cmd.push(function () {
        googletag.display(key);
      });
    }
  }

  window.habr_blockers_checker = new function() {
    var result;
    var callbacksQueue = [];
    var calledOnce = false;

    function fireCallbacks() {
      callbacksQueue.forEach(function(callback) {
        callback(result);
      });
      callbacksQueue = [];
    }

    this.detect = function(imgUrl, callback) {
      var checksRemain = 2;
      var detected = false;
      var error1 = false;
      var error2 = false;

      if (typeof callback !== 'function') {
        return;
      };

      callbacksQueue.push(callback);

      if (typeof result !== 'undefined') {
        fireCallbacks();
      };

      if (calledOnce) {
        return;
      }
      calledOnce = true;

      imgUrl += '?ch=*&rn=*';

      function beforeCheck(timeout) {
        if (checksRemain === 0 || timeout > 1E3) {
          result = checksRemain === 0 && detected;
          fireCallbacks();
        } else {
          setTimeout(function() {
            beforeCheck(timeout * 2)
          }, timeout * 2);
        }
      }

      function checkImages() {
        if (--checksRemain) {
          return;
        };
        detected = !error1 && error2;
      }

      var random = Math.random() * 11;

      var img1 = new Image;
      img1.onload = checkImages;
      img1.onerror = function() {
        error1 = true;
        checkImages()
      };
      img1.src = imgUrl.replace(/\*/, 1).replace(/\*/, random);

      var img2 = new Image;
      img2.onload = checkImages;
      img2.onerror = function() {
        error2 = true;
        checkImages()
      };
      img2.src = imgUrl.replace(/\*/, 2).replace(/\*/, random);

      beforeCheck(250, callback)
    };

    this.detectWrapper = function(callback) {
      return this.detect('/images/px.gif', callback);
    };
  };

  window.display_dfp_slot = function(key) {
    if (window.habr_blockers_checker) {
      window.habr_blockers_checker.detectWrapper(window.create_callback_for_blocked(key));
    } else {
      window.create_callback_for_blocked(key)();
    }
  };
</script>


<script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/raven.min.js.Без названия"></script>
<script>Raven.config('https://830576edd4b7478086093f693a5a0df5@s.tmtm.ru/37').install()</script>

<script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/advertise.js.Без названия"></script>
<script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/adriver.js.Без названия"></script>

<script type="text/javascript">
  function callGA(usesABP) {
    if (typeof window.adb1 === 'undefined') { window.adb1 = 'yes';}
    if (usesABP) { window.adb1 = 'aa'; }

    var user_type = 'guest';

    var page_type = "publish_corp";

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-726094-1',  'auto');
        ga('create', 'UA-726094-24', 'auto', {'name': 'HGM', 'allowLinker': true});


    ga('HGM.require', 'linker');
    ga('HGM.linker:autoLink', ['toster.ru', 'habr.com', 'account.habr.com', 'm.habr.com']);

    ga('require', 'displayfeatures');
    ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
    ga('set', 'dimension2', page_type);
    ga('set', 'dimension3', 'na');
    ga('set', 'dimension4', window.adb1);
    ga('set', 'dimension6', 'ru');

    // аккаунт компании
      ga('create', 'UA-16546458-6',  'auto', { 'name': 'company' } );

    ga('company.send', 'pageview'); // Send page view for new tracker.

    (function() {
      var removeUtms = function(){
        var location = window.location;
        if (location.search.indexOf('utm_') != -1 && history.replaceState) {
          var currentUrl = location.toString();
          var strippedUrl = currentUrl.replace(/\?([^#]*)/, function(_, search) {
            var result = search.split('&').map(function(param) {
              if (/^utm_/.test(param)) {
                return '';
              }
              return param;
            }).filter(Boolean).join('&');
            return result ? '?' + result : '';
          });

          history.replaceState({}, '', strippedUrl);
        }
      };
      ga('require', 'GTM-559GVC8');
      ga('send', 'pageview', { 'hitCallback': removeUtms });
    })();

    ga('HGM.set', 'dimension1', user_type);
    ga('HGM.set', 'dimension2', "habrahabr");
    ga('HGM.set', 'dimension4', window.adb1);

    ga('HGM.send', 'pageview');
  }


  if (window.habr_blockers_checker) {
    window.habr_blockers_checker.detectWrapper(callGA);
  } else {
    callGA(false)
  }

</script>


  <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script charset="utf-8" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/moment_timeline_tweet.fcad8ea2acff297a366cdbcbb2a39c03.js.Без названия"></script><script charset="utf-8" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/tweet.73b7ab8a56ad3263cad8d36ba66467fc.js.Без названия"></script><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_SVG_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax_SVG .MJX-monospace {font-family: monospace}
.MathJax_SVG .MJX-sans-serif {font-family: sans-serif}
#MathJax_SVG_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax_SVG {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax_SVG * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.mjx-svg-href {fill: blue; stroke: blue}
.MathJax_SVG_Processing {visibility: hidden; position: absolute; top: 0; left: 0; width: 0; height: 0; overflow: hidden; display: block!important}
.MathJax_SVG_Processed {display: none!important}
.MathJax_SVG_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG_LineBox {display: table!important}
.MathJax_SVG_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

  <body class="nl"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"></defs></svg></div><div id="MathJax_Message" style="display: none;"></div>

    <div class="layout">
      <div class="layout__row layout__row_services">
        <div id="TMpanel">
  <div class="container">
    <div class="bmenu">
      <a href="https://habr.com/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo" class="current">Хабр</a>
      <a href="https://habr.com/flows/geektimes/">Geektimes</a>
      <a href="https://toster.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Тостер</a>
      <a href="https://moikrug.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Мой круг</a>
      <a href="https://freelansim.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Фрилансим</a>
    </div>
  </div>
</div>

      </div>

      <div class="layout__row layout__row_navbar">
        <div class="layout__cell">
          <div class="main-navbar">
  <div class="main-navbar__section main-navbar__section_left">
    <span class="logo-wrapper">
      <a href="https://habr.com/ru/" class="logo" title="">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg icon-svg_logo-habrahabr" width="71" height="26" viewBox="0 0 92 32"><path d="M6.827 12.278c1.273-1.735 3.304-2.848 5.595-2.848l.521.019-.023-.001c4.272 0 7.587 2.988 7.587 7.941v14.047h-6.827v-11.636c0-2.529-1.31-3.931-3.381-3.931-1.9 0-3.473 1.31-3.473 4.062v11.505h-6.827v-31.45h6.827zM46.611 31.437h-6.552v-2.319c-1.357 1.764-3.468 2.89-5.843 2.89l-.332-.007.016.001c-5.713 0-9.946-4.98-9.946-11.296s4.233-11.256 9.972-11.256l.288-.006c2.378 0 4.491 1.131 5.832 2.884l.013.018v-2.306h6.552zm-15.725-10.72c0 2.533 2.053 4.586 4.586 4.586s4.586-2.053 4.586-4.586c0-2.533-2.053-4.586-4.586-4.586s-4.586 2.053-4.586 4.586zM73.959 20.704c0 6.316-4.246 11.296-9.959 11.296l-.342.008c-2.354 0-4.446-1.116-5.778-2.848l-.013-.017v2.293h-6.552v-31.45h6.814v12.095c1.343-1.61 3.351-2.628 5.596-2.628l.329.007-.016-.001c5.674-.013 9.92 4.94 9.92 11.243zm-16.157 0c0 2.533 2.053 4.586 4.586 4.586s4.586-2.053 4.586-4.586c0-2.533-2.053-4.586-4.586-4.586s-4.586 2.053-4.586 4.586zM92.318 9.776l-.59 6.801c-1.019-.342-2.193-.547-3.412-.563h-.008c-.15-.023-.323-.036-.498-.036-1.911 0-3.459 1.549-3.459 3.459 0 .151.01.3.029.447l-.002-.017v11.571h-6.84v-21.399h6.552v2.464c1.124-1.85 3.128-3.068 5.417-3.068l.448.016-.02-.001h.022c.842 0 1.655.12 2.425.343l-.061-.015z"></path></svg>

      </a>
      
    </span>
    <ul class="nav-links" id="navbar-links">
  <li class="nav-links__item">
    <a href="https://habr.com/ru/" class="nav-links__item-link ">Публикации</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/ru/news/" class="nav-links__item-link ">Новости</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/ru/users/" class="nav-links__item-link ">Пользователи</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/ru/hubs/" class="nav-links__item-link ">Хабы</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/ru/companies/" class="nav-links__item-link ">Компании</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/ru/sandbox/" class="nav-links__item-link ">Песочница</a>
  </li>
</ul>

    <form action="https://habr.com/ru/search/#h" method="get" class="search-form" id="search-form">
  <button type="button" class="btn btn_navbar_search icon-svg_search" id="search-form-btn" title="Поиск по сайту">
    <svg class="icon-svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M21.416 13.21c0 4.6-3.65 8.34-8.14 8.34S5.11 17.81 5.11 13.21c0-4.632 3.65-8.373 8.167-8.373 4.488 0 8.14 3.772 8.14 8.372zm1.945 7.083c1.407-2.055 2.155-4.57 2.155-7.084C25.515 6.277 20.04.665 13.277.665S1.04 6.278 1.04 13.21c0 6.93 5.475 12.542 12.237 12.542 2.454 0 4.907-.797 6.942-2.208l7.6 7.79 3.14-3.22-7.6-7.82z"></path></svg>
  </button>
  <label class="search-form__field-wrapper">
    <input type="text" name="q" class="search-form__field" id="search-form-field" placeholder="Поиск" tabindex="-1">
    <button type="button" class="btn btn_search-close" id="search-form-clear" title="Закрыть">
      <svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>

    </button>
  </label>
</form>

  </div>

  <div class="main-navbar__section main-navbar__section_right">
        <button type="button" class="btn btn_medium btn_navbar_lang js-show_lang_settings">
          <svg class="icon-svg" width="18" height="18">
            <use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#globus"></use>
          </svg>
        </button>
      <a href="https://habr.com/ru/auth/login/" id="login" class="btn btn_medium btn_navbar_login">Войти</a>
      <a href="https://habr.com/ru/auth/register/" class="btn btn_medium btn_navbar_registration">Регистрация</a>


  </div>
</div>

        </div>
      </div>

      <div class="layout__row layout__row_body">
        <div class="layout__cell layout__cell_body">
          
            
  
  
  
      <div class="page-header__banner">
      <a href="https://corp.mail.ru/ru/" target="_blank" rel=" noopener"><img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/81ad7853daac5483c2091042052bf962.jpg" alt="company_banner"></a>
  </div>

    <div class="page-header page-header_small page-header_bordered" id="company_2">
      <div class="page-header_wrapper">
        <div class="media-obj media-obj_company">
    <a href="https://habr.com/company/mailru/" class="media-obj__image page-header__image">
        <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/1c179ce792168371a7fe9556db69dc7d.png" width="48" height="48" class="company-info__image-pic">
    </a>

  <div class="media-obj__body media-obj__body_page-header media-obj__body_page-header_branding">

    <div class="page-header__info">
        <div class="page-header__info-title">Mail.ru Group</div>
        <sup class="page-header__stats-value page-header__stats-value_branding" title="Рейтинг компании">1&nbsp;073,99</sup>
        <div class="page-header__info-desc">
          Строим Интернет
        </div>
    </div>
  </div>
</div>


      </div>
    </div>
  <div class="column-wrapper js-sticky-wrapper">
    <div class="content_left js-content_left">
      <div class="company_post">
        
    <article class="post post_full" id="post_269465" lang="ru">
  <div class="post__wrapper">
    <header class="post__meta">
        <a href="https://habr.com/ru/users/drfisher/" class="post__user-info user-info" title="Автор публикации">
            <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98.jpg" width="24" height="24" class="user-info__image-pic user-info__image-pic_small">
          <span class="user-info__nickname user-info__nickname_small">drfisher</span>
        </a>

      <span class="post__time" data-time_published="2015-10-26T05:50Z">26 октября 2015 в 08:50</span>

      
    </header>

    <h1 class="post__title post__title_full">
      <span class="post__title-text">У нас проблемы с промисами</span>
    </h1>

      <div class="post__translatation">
        <a href="http://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html" class="post__translatation-link" title="Автор оригинала: Nolan Lawson" target="_blank" rel=" noopener">Автор оригинала: Nolan Lawson</a>
      </div>

      <ul class="post__hubs post__hubs_full-post inline-list">
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/company/mailru/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;hub&#39;, &#39;post page&#39;, &#39;Блог компании Mail.ru Group&#39;); }">Блог компании Mail.ru Group</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/webdev/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;hub&#39;, &#39;post page&#39;, &#39;Разработка веб-сайтов&#39;); }">Разработка веб-сайтов</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/javascript/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;hub&#39;, &#39;post page&#39;, &#39;JavaScript&#39;); }">JavaScript</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/nodejs/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;hub&#39;, &#39;post page&#39;, &#39;Node.JS&#39;); }">Node.JS</a>
          </li>
      </ul>

    <ul class="post__marks inline-list"><li class="inline-list__item inline-list__item_post-type"><span class="post__type-label" title="Перевод">Перевод</span></li></ul>

    <div class="post__body post__body_full">
      <div class="post__text post__text-html js-mediator-article"><i>Разрешите представить вам перевод статьи Нолана Лоусона «<a href="http://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html">У нас проблемы с промисами</a>», одной из лучших по теме из тех, что мне доводилось читать.</i><br>
<br>
<h3>У нас проблемы с промисами</h3><br>
Дорогие JavaScript разработчики, настал момент признать это — у нас проблемы с промисами.<br>
<br>
Нет, не с самими промисами. Их реализация по <a href="https://promisesaplus.com/">спецификации A+</a> превосходна. Основная проблема, которая сама предстала передо мной за годы наблюдений за тем, как многие программисты борются с богатыми на промисы API, заключается в следующем:<br>
<br>
— Многие из нас используют промисы без действительного их понимания.<br>
<br>
Если вы мне не верите, решите такую задачку:<br>
<br>
<b>Вопрос: В чем разница между этими четырьмя вариантами использования промисов?</b><br>
<br>
<pre><code class="javascript hljs">doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomethingElse();
});

doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  doSomethingElse();
});

doSomething().then(doSomethingElse());

doSomething().then(doSomethingElse);
</code></pre><br>
<a name="habracut"></a><br>
Если вы знаете ответ, то разрешите вас поздравить — по части промисов вы ниндзя. Пожалуй, дальше этот пост вам можно не читать.<br>
<br>
Остальным 99,99% из вас я спешу сказать, чтобы вы не расстраивались, вы в хорошей компании. Никто из тех, кто ответил на <a href="https://twitter.com/nolanlawson/status/578948854411878400">мой твит</a>, не смог решить задачу. Даже я был очень удивлен ответом на 3-й вопрос. Да-да, несмотря на то, что это я его задал!<br>
<br>
Ответ на задачу приведен в самом конце статьи, но сначала я хотел бы объяснить, почему промисы в первом приближении такие коварные, и почему многие из нас, новички и эксперты, попадаются в их ловушки. Также я хочу предложить вам свое решение, один необычный трюк, который поможет лучше понять промисы. И, разумеется, я верю, что после моего объяснения они уже не покажутся вам такими сложными.<br>
<br>
Прежде, чем начать, давайте обозначим некоторые моменты.<br>
<br>
<h3>Почему промисы?</h3><br>
Если вы читаете статьи о промисах, то часто будете встречать отсылки на «<a href="https://medium.com/@wavded/managing-node-js-callback-hell-1fe03ba8baf">пирамиду зла</a>» («pyramide of doom» в ориг.), образованную ужасным кодом на колбэках, который растягивает страницу направо за экран.<br>
<br>
Промисы действительно решают эту проблему, но это нечто большее, чем просто уменьшение отступов. Как объясняется в замечательной беседе «<a href="http://www.youtube.com/watch?v=hf1T_AONQJU">Спасение из ада колбэков</a>», настоящая их проблема в том, что они лишают нас возможности использовать инструкции <b>return</b> и <b>throw</b>. Вместо этого логика наших программ основана на использовании побочных эффектов, когда одна функция вызывает другую.<br>
<br>
Также колбэки делают что-то действительно зловещее, они лишают нас стека, того, что в языках программирования принимается как должное. Писать код без стека — это все равно, что вести автомобиль без педали тормоза. Вы не представляете, насколько она важна до тех пор, пока она вам действительно не понадобится и ее не окажется на месте.<br>
<br>
Весь смысл промисов в том, чтобы вернуть нам основы языка, потерянные в момент нашего перехода на асинхронность: <b>return</b>, <b>throw</b> и стек. Но вы должны знать, как правильно использовать промисы, чтобы подняться в этом на более высокий уровень.<br>
<br>
<h2>Ошибки новичков</h2><br>
Кто-то пытается объяснить промисы <a href="http://andyshora.com/promises-angularjs-explained-as-cartoon.html">в виде мультика</a> или, говоря словами: <i>«О! Это штука, которую вы можете создать и передавать всюду, а она собой символизирует какое-то значение, получаемое и возвращаемое асинхронно»</i>.<br>
<br>
Я не нахожу такое объяснение достаточно полезным. Для меня промисы — это всегда часть структуры кода, его потока выполнения.<br>
<br>
Небольшое отступление: термин «промисы» для разных людей несет в себе разный смысл. В этой статье я буду рассказывать об <a href="https://promisesaplus.com/">официальной спецификации</a>, доступной в современных браузерах как <b>window.Promise</b>. Для тех браузеров, которые не имеют <b>window.Promise</b>, есть хороший полифил с нахальным названием <a href="https://github.com/calvinmetcalf/lie">Lie</a> (ложь), содержащий минимальную реализацию спецификации.<br>
<br>
<h3>Ошибка новичка №1 — «пирамида зла» из промисов</h3><br>
Глядя, как люди используют PouchDB, API которого сильно завязано на промисах, я вижу немало плохих паттернов их использования. Вот наиболее распространенный пример:<br>
<br>
<pre><code class="javascript hljs">remotedb.allDocs({
  <span class="hljs-attr"><span class="hljs-attr">include_docs</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
  <span class="hljs-attr"><span class="hljs-attr">attachments</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>
}).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> docs = result.rows;
  docs.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element</span></span></span><span class="hljs-function">) </span></span>{
    localdb.put(element.doc).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{
      alert(<span class="hljs-string"><span class="hljs-string">"Pulled doc with id "</span></span> + element.doc._id + <span class="hljs-string"><span class="hljs-string">" and added to local db."</span></span>);
    }).catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err.status == <span class="hljs-number"><span class="hljs-number">409</span></span>) {
        localdb.get(element.doc._id).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resp</span></span></span><span class="hljs-function">) </span></span>{
          localdb.remove(resp._id, resp._rev).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resp</span></span></span><span class="hljs-function">) </span></span>{
<span class="hljs-comment"><span class="hljs-comment">// и так далее…</span></span>
</code></pre><br>
Да, получается, что мы можем использовать промисы так, будто это колбэки, и да, это все равно, что стрелять из пушки по воробьям.<br>
<br>
Если вы думаете, что подобные ошибки совершают только абсолютные новички, я вас удивлю — код <a href="https://github.com/blackberry/BB10-WebWorks-Community-Samples/blob/d6ee75fe23a10d2d3a036013b6b1a0c07a542099/pdbtest/www/js/index.js">примера выше</a> взят из <a href="http://devblog.blackberry.com/2015/05/connecting-to-couchbase-with-pouchdb/">официального блога разработчиков BlackBerry</a>! От старой привычки использовать колбэки избавиться трудно.<br>
<br>
Вот вариант получше:<br>
<br>
<pre><code class="javascript hljs">remotedb.allDocs(...)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfPut</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.get(...);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfGet</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...);
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(err);
  });
</code></pre><br>
В примере выше использовались составные промисы («composing promises» в ориг.) — одна из сильнейших сторон промисов. Каждая последующая функция будет вызвана, когда предыдущий промис «зарезолвится», и вызвана она будет с результатом работы предыдущего промиса. Подробности будут ниже.<br>
<br>
<h3>Ошибка новичка №2 — как мне использовать forEach() с промисами?</h3><br>
Это тот момент, когда понимание промисов большинством людей начинает сдавать. Они хорошо знакомы с итераторами <b>forEach</b>, <b>for</b> или <b>while</b>, но не имеют ни малейшего представления, как сочетать их с промисами. Тогда рождается что-то подобное:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Я хочу применить remove() ко всем документам</span></span>
db.allDocs({<span class="hljs-attr"><span class="hljs-attr">include_docs</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>})
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    result.rows.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row</span></span></span><span class="hljs-function">) </span></span>{
      <span class="hljs-comment"><span class="hljs-comment">// Метод remove возвращает promise</span></span>
      db.remove(row.doc);
    });
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// А здесь я наивно уверен, что все документы уже удалены!</span></span>
  });
</code></pre><br>
Что не так с этим кодом? Проблема в том, что первая функция возвращает <b>undefined</b>, а значит вторая не ждет окончания выполнения <b>db.remove()</b> для всех документов. На самом деле она вообще ничего не ждет и выполнится, когда будет удалено любое число документов, а может и ни одного.<br>
<br>
Это очень коварная ошибка, потому что поначалу вы можете ее даже не заметить, особенно, если документы будут удаляться достаточно быстро для обновления интерфейса. Бага может всплывать только в редких случаях, не во всех браузерах, а значит, выявить и устранить ее будет практически невозможно.<br>
<br>
Подводя итог, скажу, что конструкции типа <b>forEach</b>, <b>for</b> и <b>while</b> <i>«не те дроны, что вы ищете»</i>. Вам нужен <b>Promise.all()</b>:<br>
<br>
<pre><code class="javascript hljs">db.allDocs({<span class="hljs-attr"><span class="hljs-attr">include_docs</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>})
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arrayOfPromises = result.rows.map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row</span></span></span><span class="hljs-function">) </span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db.remove(row.doc);
    });
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(arrayOfPromises);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arrayOfResults</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Вот теперь все документы точно удалены!</span></span>
  });
</code></pre><br>
Что здесь происходит? <b>Promise.all()</b> принимает в качестве аргумента массив промисов и возвращает новый промис, который «зарезолвится», только когда все документы будут удалены. Это асинхронный эквивалент цикла <b>for</b>.<br>
<br>
Также промис из <b>Promise.all()</b> передаст в следующую функцию массив результатов, что может быть очень удобно, если вы, например, не удаляете документы, а получаете данные сразу из нескольких источников. Если хотя бы один промис из массива, переданного в <b>Promise.all()</b> «зареджектится», то и результирующий промис перейдет в состояние <b>rejected</b>.<br>
<br>
<h3>Ошибка новичка №3 — забываем добавлять .catch()</h3><br>
Это еще одна распространенная ошибка — блаженно верить, что ваши промисы никогда не вернут ошибку. Многие разработчики просто забывают добавлять <b>catch()</b> куда-либо в своем коде.<br>
<br>
К сожалению, часто это означает, что ошибки будут «проглочены». Вы даже никогда не узнаете, что они были — особая боль при отладке приложения.<br>
<br>
Чтобы избежать этого неприятного сценария, я взял за правило, которое затем переросло в привычку, всегда добавлять в конец моей цепочки промисов метод <b>catch()</b>:<br>
<br>
<pre><code class="javascript hljs">somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> anotherPromise();
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> yetAnotherPromise();
  })
  <span class="hljs-comment"><span class="hljs-comment">// простое и полезное окончание цепочки промисов:</span></span>
  .catch(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.bind(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>));
</code></pre><br>
Даже если вы гарантированно, стопроцентно не ожидаете каких-либо ошибок, добавление <b>catch()</b> будет разумным решением. Потом, если вдруг ваше предположение насчет ошибок не оправдается, вы скажете себе спасибо.<br>
<br>
<h3>Ошибка новичка №4 — использование «deferred»</h3><br>
Такую ошибку я вижу постоянно и не хочу даже повторять название этого объекта, опасаясь, что он, подобно <a href="https://afisha.mail.ru/cinema/movies/625126_bitldzhus/">Битлджусу</a> из одноименного фильма, только того и ждет, чтобы увеличить число случаев своего использования.<br>
<br>
Вкратце, в своем развитии промисы прошли долгую историю. У JavaScript сообщества ушло много времени на то, чтобы реализовать их правильно. Поначалу jQuery и Angular повсеместно использовали паттерн deferred-объектов, который впоследствии был заменен на спецификацию промисов ES6, в основе которой лежали «хорошие» библиотеки Q, When, RSVP, Bluebird, Lie и другие.<br>
<br>
В общем, если вы вдруг написали это слово в своем коде (я не повторю его в третий раз!), знайте — вы что-то делаете не так. Ниже рецепт, как этого избежать.<br>
<br>
Большинство «промисных» библиотек дают вам возможность импортировать промисы из других библиотек. Например, модуль <b>$q</b> из Angular позволяет вам обернуть не-$q промисы при помощи <b>$q.when()</b>. То есть пользователи Angular могут оборачивать промисы из PouchDB так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// это все, что нужно:</span></span>
$q.when(db.put(doc)).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
</code></pre><br>
Другой путь — использование <a href="https://blog.domenic.me/the-revealing-constructor-pattern/">паттерна раскрытия конструктора</a> («revealing constructor pattern» в ориг.). Он удобен для оборачивания API, не использующего промисы. Например, чтобы обернуть основанное на колбэках API Node.js, вы можете сделать следующее:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) </span></span>{
  fs.readFile(<span class="hljs-string"><span class="hljs-string">'myfile.txt'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, file</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) {
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reject(err);
    }
    resolve(file);
  });
}).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>)
</code></pre><br>
Готово! Мы расправились с ужасным defer… Ах, чуть не произнес в третий раз! :)<br>
<br>
<h3>Ошибка новичка №5 — использование внешних функций вместо возвращения результата</h3><br>
Что не так с этим кодом?<br>
<br>
<pre><code class="javascript hljs">somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    someOtherPromise();
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Ох, я надеюсь someOtherPromise «зарезолвился»…</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Осторожно, спойлер: нет, не «зарезолвился».</span></span>
  });
</code></pre><br>
Хорошо, сейчас идеальный момент для того, чтобы поговорить обо всем том, что вы вообще должны знать о промисах.<br>
<br>
Серьезно, это тот самый трюк, поняв который, вы сами сможете избежать всех тех ошибок, о которых мы говорили. Вы готовы?<br>
<br>
Как я уже упоминал, магия промисов в том, что они возвращают нам драгоценные <b>return</b> и <b>throw</b>. Но что это означает на практике?<br>
<br>
Каждый промис предоставляет вам метод <b>then()</b> (а еще <b>catch()</b>, который на практике просто «сахар» для <b>then(null, …)</b>). И вот мы внутри функции <b>then()</b>:<br>
<br>
<pre><code class="javascript hljs">somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Вау, мы внутри функции then()!</span></span>
});
</code></pre><br>
Что мы можем тут сделать? Три вещи:<br>
<br>
<ol>
<li>Вернуть (<b>return</b>) другой промис</li>
<li>Вернуть (<b>return</b>) синхронное значение (или <b>undefined</b>)</li>
<li>Выдать (<b>throw</b>) синхронную ошибку</li>
</ol><br>
Вот и все, весь трюк. Поймете его — поймете промисы. Давайте теперь разберем подробно каждый из пунктов.<br>
<br>
<h4>1. Вернуть другой промис</h4><br>
Это частый паттерн, который вы могли видеть во всевозможной литературе о промисах, а также в примере с составными промисами выше:<br>
<br>
<pre><code class="javascript hljs">getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Функция getUserAccountById возвращает promise,</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// результат которого попадет в следующий then</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Я знаю все о пользователе!</span></span>
  });
</code></pre><br>
Обратите внимание, что я именно возвращаю второй промис, использую <b>return</b>. Использование здесь <b>return</b> — это ключевой момент. Если бы я просто вызвал <b>getUserAccountById</b>, то да, был бы запрос за данными пользователя, был бы получен результат, который нигде бы не пригодился — следующий <b>then</b> получил бы <b>undefined</b> вместо желанного <b>userAccount</b>.<br>
<br>
<h4>2. Вернуть синхронное значение (или undefined)</h4><br>
Возвращение <b>undefined</b> в качестве результата — частая ошибка. А вот возвращение какого-либо синхронного значения — отличный способ преобразовать синхронный код в цепочку промисов. Допустим, у нас в памяти есть кэш данных о пользователях. Мы можем:<br>
<br>
<pre><code class="javascript hljs">getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inMemoryCache[user.id]) {
      <span class="hljs-comment"><span class="hljs-comment">// Данные этого пользователя уже есть,</span></span>
      <span class="hljs-comment"><span class="hljs-comment">// возвращаем сразу</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inMemoryCache[user.id];
    }
    <span class="hljs-comment"><span class="hljs-comment">// А вот про этого пока не знаем,</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// вернем промис запроса</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Я знаю все о пользователе!</span></span>
  });
</code></pre><br>
Разве не круто? Второй функции в цепочке не важно, откуда взялись данные, из кэша или как результат запроса, а первая вольна вернуть или синхронное значение сразу, или асинхронный промис, который уже в свою очередь вернет синхронное значение.<br>
<br>
К сожалению, если вы не использовали <b>return</b>, то функция все равно вернет значение, но им будет уже не результат вызова вложенной функции, а бесполезный <b>undefined</b>, возвращаемый в таких случаях по-умолчанию.<br>
<br>
Для себя я ввел правило, которое затем переросло в привычку — всегда использовать <b>return</b> внутри then или выдавать ошибку при помощи <b>throw</b>. Я рекомендую вам поступать так же.<br>
<br>
<h4>3. Выдавать синхронную ошибку</h4><br>
Вот мы и подошли к <b>throw</b>. Здесь промисы начинают сиять еще ярче. Предположим, мы хотим выдать (<b>throw</b>) синхронную ошибку, если пользователь не авторизован. Это просто:<br>
<br>
<pre><code class="javascript hljs">getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (user.isLoggedOut()) {
      <span class="hljs-comment"><span class="hljs-comment">// Пользователь вышел — выдаем ошибку!</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'user logged out!'</span></span>);
    }
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inMemoryCache[user.id]) {
      <span class="hljs-comment"><span class="hljs-comment">// Данные этого пользователя уже есть,</span></span>
      <span class="hljs-comment"><span class="hljs-comment">// возвращаем сразу</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inMemoryCache[user.id];
    }
    <span class="hljs-comment"><span class="hljs-comment">// А вот про этого пока не знаем,</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// вернем промис запроса</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Я знаю все о пользователе!</span></span>
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Упс, ошибка, но мы к ней готовы!</span></span>
  });
</code></pre><br>
Наш <b>catch()</b> получит синхронную ошибку, если пользователь не авторизован, или асинхронную, если любой из промисов выше перейдет в состояние <b>rejected</b>. И снова, функции в <b>catch</b> без разницы, была ошибка синхронной или асинхронной.<br>
<br>
Это особенно удобно для отлавливания ошибок во время разработки. Например, формирование объекта из строки при помощи <b>JSON.parse()</b> где-либо внутри <b>then()</b> может выдать ошибку, если <b>json</b> невалидный. С колбэками она будет «проглочена», но при помощи метода <b>catch()</b> мы без труда сможем ее обработать.<br>
<br>
<h2>Продвинутые ошибки</h2><br>
Хорошо, теперь, когда вы выучили главный трюк промисов, давайте поговорим о крайних случаях. Потому что крайние случаи есть всегда.<br>
<br>
Эту категорию ошибок я называю «продвинутые», потому что встречал их только в коде хорошо знакомых с промисами программистов. Обсудить подобные ошибки мы должны для того, чтобы разобрать задачку, которую я опубликовал в самом начале статьи.<br>
<br>
<h3>Продвинутая ошибка №1 — не знаем о Promise.resolve()</h3><br>
Я уже показывал выше, насколько удобны промисы при оборачивании синхронной логики в асинхронный код. Вероятно, вы могли замечать за собой что-то похожее:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) </span></span>{
  resolve(someSynchronousValue);
}).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
</code></pre><br>
Имейте в виду, вы можете написать то же самое гораздо короче:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(someSynchronousValue).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
</code></pre><br>
Также такой подход очень удобен для отлавливания любых синхронных ошибок. Он настолько удобен, что я использую его почти во всех методах API, возвращающих промисы:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">somePromiseAPI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve()
    .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
      doSomethingThatMayThrow();
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'foo'</span></span>;
    })
    .then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
}
</code></pre><br>
Просто запомните, любой код, который может выдать синхронную ошибку — потенциальная проблема при отладке из-за «проглоченных» ошибок. Но если вы обернете его в <b>Promise.resolve()</b>, то можете быть уверены, что поймаете ее при помощи <b>catch()</b>.<br>
<br>
Еще есть <b>Promise.reject()</b>. Его можно использовать для возвращения промиса в статусе <b>rejected</b>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.reject(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(‘Какая-то ужасная ошибка’));
</code></pre><br>
<h3>Продвинутая ошибка №2 — catch() не одно и то же с then(null, …)</h3><br>
Чуть выше я упоминал, что <b>catch()</b> — это просто «сахар». Два примера ниже эквивалентны:<br>
<br>
<pre><code class="javascript hljs">somePromise().catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Обрабатываем ошибку</span></span>
});

somePromise().then(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Обрабатываем ошибку</span></span>
});
</code></pre><br>
Однако, примеры ниже уже не «равны»:<br>
<br>
<pre><code class="javascript hljs">somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> someOtherPromise();
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Обработка ошибка</span></span>
  });

somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> someOtherPromise();
}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Обработка ошибки</span></span>
});
</code></pre><br>
Если вы задумались, почему примеры выше «не равны», посмотрите внимательно, что произойдет, если в первой функции возникнет ошибка:<br>
<br>
<pre><code class="javascript hljs">somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'oh noes'</span></span>);
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Ошибка поймана! :)</span></span>
  });

somePromise().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'oh noes'</span></span>);
}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Ошибка? Какая ошибка? O_o</span></span>
});
</code></pre><br>
Получается, что, если вы используете формат <b>then(resolveHandler, rejectHandler)</b>, то <b>rejectHandler</b> по факту не может поймать ошибку, возникшую внутри функции <b>resolveHandler</b>.<br>
<br>
Зная эту особенность, для себя я ввел правило никогда не использовать вторую функцию в методе <b>then()</b>, а взамен всегда добавлять обработку ошибок ниже в виде <b>catch()</b>. Исключение у меня только одно — асинхронные тесты в <a href="http://mochajs.org/">Mocha</a>, в случаях, когда я намеренно жду ошибку:<br>
<br>
<pre><code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'should throw an error'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomethingThatThrows().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'I expected an error!'</span></span>);
  }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    should.exist(err);
  });
});
</code></pre><br>
К слову, <a href="http://mochajs.org/">Mocha</a> и <a href="http://chaijs.com/">Chai</a> — отличная комбинация для тестирования основанного на промисах API.<br>
<br>
<h3>Продвинутая ошибка №3 — промисы против фабрик промисов</h3><br>
Допустим, вы хотите выполнить серию промисов один за другим, последовательно. Вы хотите что-то вроде <b>Promise.all()</b>, но такой, чтобы <b>не</b> выполнял промисы параллельно.<br>
<br>
Сгоряча вы можете написать что-то подобное:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeSequentially</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">promises</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve();
  promises.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">promise</span></span></span><span class="hljs-function">) </span></span>{
    result = result.then(promise);
  });
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
}
</code></pre><br>
К сожалению, пример выше не будет работать так, как задумывалось. Промисы из списка, переданного в <b>executeSequentially()</b>, все равно начнут выполняться параллельно.<br>
<br>
Причина в том, что по спецификации промис начинает выполнять заложенную в него логику сразу после создания. Он не будет ждать. Таким образом, не сами промисы, а массив фабрик промисов — это то, что действительно нужно передать в <b>executeSequentially</b>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeSequentially</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">promiseFactories</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve();
  promiseFactories.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">promiseFactory</span></span></span><span class="hljs-function">) </span></span>{
    result = result.then(promiseFactory);
  });
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
}
</code></pre><br>
Я знаю, вы сейчас думаете: <i>«Кто, черт возьми, этот Java программист, и почему он рассказывает нам о фабриках?»</i>. На самом деле фабрика — это простая функция, возвращающая промис:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myPromiseFactory</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> somethingThatCreatesAPromise();
}
</code></pre><br>
Почему этот пример будет работать? А потому, что наша фабрика не создаст промис до тех пор, пока до него не дойдет очередь. Она работает именно как <b>resolveHandler</b> для <b>then()</b>.<br>
<br>
Посмотрите внимательно на функцию <b>executeSequentially()</b> и мысленно замените ссылку на <b>promiseFactory</b> ее содержимым — сейчас над вашей головой должна радостно вспыхнуть лампочка :)<br>
<br>
<h3>Продвинутая ошибка №4 — что, если я хочу результат двух промисов?</h3><br>
Часто бывает, что один промис зависит от другого, а нам на выходе нужны результаты обоих. Например:<br>
<br>
<pre><code class="javascript hljs">getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Стойте, мне еще и объект «user» нужен!</span></span>
  });
</code></pre><br>
Желая оставаться хорошими JavaScript разработчиками, мы возможно захотим вынести на более высокий уровень видимости переменную <b>user</b>, дабы не создавать «пирамиду зла».<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user;
getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    user = result;
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// Хорошо, теперь есть и «user», и «userAccount»</span></span>
  });
</code></pre><br>
Это работает, но лично я считаю, что код «попахивает». Мое решение — отодвинуть в сторону предубеждения и сделать осознанный шаг в сторону «пирамиды»:<br>
<br>
<pre><code class="javascript hljs">getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id)
      .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
        <span class="hljs-comment"><span class="hljs-comment">// Хорошо, теперь есть и «user», и «userAccount»</span></span>
      });
});
</code></pre><br>
… по крайней мере, временный шаг. Если же вы почувствуете, что отступы увеличиваются и пирамида начинает угрожающе расти, сделайте то, что JavaScript разработчики делали испокон веков — создайте функцию и используйте ее по имени.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onGetUserAndUserAccount</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user, userAccount</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomething(user, userAccount);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onGetUser</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUserAccountById(user.id)
    .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userAccount</span></span></span><span class="hljs-function">) </span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> onGetUserAndUserAccount(user, userAccount);
    });
}

getUserByName(<span class="hljs-string"><span class="hljs-string">'nolan'</span></span>)
  .then(onGetUser)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// К этому моменту функция doSomething() выполнилась,</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// а отступы не выросли — пирамидой и не пахнет</span></span>
  });
</code></pre><br>
По мере того, как код будет усложняться, вы обратите внимание, что все большая его часть преобразовывается в именованные функции, а сама логика приложения начинает приобретать вид, приносящий эстетическое удовольствие:<br>
<br>
<pre><code class="javascript hljs">putYourRightFootIn()
  .then(putYourRightFootOut)
  .then(putYourRightFootIn)
  .then(shakeItAllAbout);
</code></pre><br>
Вот для чего нам промисы.<br>
<br>
<h3>Продвинутая ошибка №5 — «проваливание» сквозь промисы</h3><br>
Наконец, именно на эту ошибку я намекал, предлагая вам решить задачку в начале статьи. Это очень редкий случай. Возможно, он никогда не появится в вашем коде. Повстречав его, я определенно удивился.<br>
<br>
Как вы думаете, что выведет в консоль этот код?<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>)
  .then(<span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>))
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result);
  });
</code></pre><br>
Если вы думаете, что это будет bar, вы ошиблись. В консоли появится foo!<br>
<br>
Причина в том, что, когда вы передаете в <b>then()</b> что-то отличное от функции (например, промис), это интерпретируется как <b>then(null)</b> и в следующий по цепочке промис «проваливается» результат предыдущего. Проверьте сами:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>)
  .then(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result);
  });
</code></pre><br>
Добавьте сколько угодно <b>then(null)</b>, результат останется прежним — в консоли вы увидите foo.<br>
<br>
Данный пример возвращает нас к выбору между промисами и фабриками промисов. Мы разбирали его выше. Если коротко, вы можете передавать прямо в <b>then()</b> промис, но результат будет совсем не тем, что вы ожидали. Метод <b>then()</b> ожидает функцию. Чтобы ожидания сбылись, нужно переписать пример как-то так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result);
  });
</code></pre><br>
В консоли вы увидите bar, как и ожидали.<br>
<br>
Запоминаем: в метод <b>then()</b> передаем только функции.<br>
<br>
<h2>Решение задачи</h2><br>
Теперь, когда мы о промисах знаем все или, по крайней мере, близки к этому, мы должны решить задачу, которую я опубликовал выше.<br>
<br>
Вот ответы на все пазлы с визуализацией для лучшего понимания.<br>
<br>
<h4>Пазл №1</h4><br>
<pre><code class="javascript hljs">doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomethingElse();
  })
  .then(finalHandler);
</code></pre><br>
Ответ:<br>
<br>
<pre><code class="hljs pgsql">doSomething
|<span class="hljs-comment"><span class="hljs-comment">-----------------|</span></span>
                  doSomethingElse(undefined)
                  |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
                                     finalHandler(resultOfDoSomethingElse)
                                     |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
</code></pre><br>
<h4>Пазл №2</h4><br>
<pre><code class="javascript hljs">doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    doSomethingElse();
  })
  .then(finalHandler);
</code></pre><br>
Ответ:<br>
<br>
<pre><code class="hljs pgsql">doSomething
|<span class="hljs-comment"><span class="hljs-comment">-----------------|</span></span>
                  doSomethingElse(undefined)
                  |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
                  finalHandler(undefined)
                  |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
</code></pre><br>
<h4>Пазл №3</h4><br>
<pre><code class="javascript hljs">doSomething().then(doSomethingElse())
  .then(finalHandler);
</code></pre><br>
Ответ:<br>
<br>
<pre><code class="hljs pgsql">doSomething
|<span class="hljs-comment"><span class="hljs-comment">-----------------|</span></span>
doSomethingElse(undefined)
|<span class="hljs-comment"><span class="hljs-comment">---------------------------------|</span></span>
                  finalHandler(resultOfDoSomething)
                  |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
</code></pre><br>
<h4>Пазл №4</h4><br>
<pre><code class="javascript hljs">doSomething().then(doSomethingElse)
  .then(finalHandler);
</code></pre><br>
Ответ:<br>
<br>
<pre><code class="hljs pgsql">doSomething
|<span class="hljs-comment"><span class="hljs-comment">-----------------|</span></span>
                  doSomethingElse(resultOfDoSomething)
                  |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
                                     finalHandler(resultOfDoSomethingElse)
                                     |<span class="hljs-comment"><span class="hljs-comment">------------------|</span></span>
</code></pre><br>
Если вы не поняли объяснения, то я советую вам перечитать статью еще раз, или самостоятельно написать функции <b>doSomething()</b> и <b>doSomethingElse()</b>, и поэкспериментировать с ними в браузере. Подразумевается, что эти функции возвращают промисы с какими-то результирующими данными.<br>
<br>
Также обратите внимание на мой <a href="https://gist.github.com/nolanlawson/6ce81186421d2fa109a4">список полезных заготовок</a>.<br>
<br>
<h2>Заключительное слово о промисах</h2><br>
Промисы очень хороши. Если вы до сих пор используете колбэки, я настойчиво рекомендую вам переключиться на промисы. Ваш код станет меньше, элегантнее, а значит, более простым для понимания.<br>
<br>
Если вы мне не верите, держите пруф-линк — <a href="https://github.com/pouchdb/mapreduce/commit/dfe44b0ab3da9d213640a1010b34bb27327da4c9">рефакторинг PounchDB модуля map/reduce с заменой колбэков на промисы</a>. Результат: 290 добавленных строк, 555 удаленных. По-случайности, автором всех этих прежних жутких колбэков был… я. Так что это стало для меня первым из освоенных преимуществ промисов.<br>
<br>
Я уже говорил, промисы великолепны. Это правда, что они лучше колбэков. Тем не менее, это все равно, что выбирать между пинком в живот и ударом в зубы. Да, что-то из этого лучше, но еще лучше избежать обоих вариантов. Промисы все еще трудны для понимания, и можно попасть в ситуацию, когда результат работы кода намного отличается от задуманного. Даже опытные разработчики могут попасть в коварную ловушку. Основная проблема в том, что промисы, хоть и реализуют паттерны, схожие с синхронным кодом, на деле совсем не равны им.<br>
<br>
<h2>Ждем async/await</h2><br>
В своей статье «<a href="http://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html">Укрощение асинхронного чудовища с ES7</a>» я упоминал <b>async/await</b> и то, как они глубже интегрировали промисы в язык. Вместо написания псевдо-синхронного кода (с фейковым методом <b>catch()</b>, который как из <b>try/catch</b>, но не совсем, ES7 позволит нам использовать настоящие <b>try/catch/return</b>.<br>
<br>
Это огромное благо для JavaScript, как для языка, потому что анти-паттерны использования промисов по-прежнему будут возникать, пока наши инструменты не будут сообщать нам о сделанных ошибках.<br>
<br>
В качестве примера из истории JavaScript, я думаю, что <a href="http://jslint.com/">JSLint</a> и <a href="http://jshint.com/">JSHint</a> сделали для сообщества гораздо больше, чем «<a href="http://www.amazon.com/dp/0596517742/ref=cm_sw_su_dp">Хорошие стороны JavaScript</a>», хоть в целом суть у них похожа. Разница в том, что в первом случае вам говорят о конкретной ошибке, которую вы сделали в определенной строке, а во втором вы читаете большую книгу о том, какие ошибки делают другие разработчики.<br>
<br>
Красота <b>async/await</b> в основном в том, что ваши ошибки проявят себя сразу при синтаксическом анализе в интерпретаторе JS, а не когда-то возможно где-то во время исполнения кода. До тех же пор полезным будет представление о возможностях промисов, о том, как их использовать в ES5 и ES6.<br>
<br>
Как и книга «Хорошие стороны JavaScript», эта статья имеет малый эффект. Вероятно однажды вы сможете дать на нее ссылку своему коллеге, который найдет в себе силы честно признать:<br>
<br>
— У меня проблемы с промисами!</div>
      
      
<script class="js-mediator-script">!function(e){function t(t,n){if(!(n in e)){for(var r,a=e.document,i=a.scripts,o=i.length;o--;)if(-1!==i[o].src.indexOf(t)){r=i[o];break}if(!r){r=a.createElement("script"),r.type="text/javascript",r.async=!0,r.defer=!0,r.src=t,r.charset="UTF-8";var d=function(){var e=a.getElementsByTagName("script")[0];e.parentNode.insertBefore(r,e)};"[object Opera]"==e.opera?a.addEventListener?a.addEventListener("DOMContentLoaded",d,!1):e.attachEvent("onload",d):d()}}}t("//mediator.mail.ru/script/2820404/","_mediator")}(window);</script>
    </div>

    

    <dl class="post__tags">
      <dt class="post__tags-label">Теги:</dt>
      <dd class="post__tags-list">    <ul class="inline-list inline-list_fav-tags js-post-tags">
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bjavascript%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">javascript</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bpromise%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">promise</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bpromises%2Fa%2B%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">promises/a+</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bes6%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">es6</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bnode.js%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">node.js</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bnodejs%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">nodejs</a></li>
    </ul>
    <button type="button" class="btn btn_outline_grey btn_mini hidden js-fav-edit-link" data-type="2" data-id="269465" onclick="show_edit_tags(this)">Добавить метки</button>
</dd>
    </dl>
  </div>
</article>


        <form action="https://habr.com/json/favorites/" method="post" class="form form_bordered form_favorites-tags hidden" id="edit_tags_form">
  <input type="hidden" name="action" value="add">
  <input type="hidden" name="ti" value="0">
  <input type="hidden" name="tt" value="0">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)" title="Закрыть"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Пометьте публикацию своими метками</legend>
    <input type="text" name="tags_string" class="form__text-field" autocomplete="off">
    <span class="form__desc">Метки лучше разделять запятой. Например: <i>программирование, алгоритмы</i></span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="">Сохранить</button>
  </div>
</form>

        <div class="post-additionals post-additionals_company">
            <ul class="post-stats post-stats_post js-user_" data-post-type="publish_corp" id="infopanel_post_269465">
        <li class="post-stats__item post-stats__item_voting-wjt">
          <div class="voting-wjt voting-wjt_post js-post-vote" data-id="269465" data-type="2">
            <button type="button" class="btn voting-wjt__button " data-action="plus" onclick="posts_vote(this);" title="Голосовать могут только зарегистрированные пользователи " disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

            <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 139: ↑136 и ↓3">+133</span>

            <button type="button" class="btn voting-wjt__button " data-action="minus" onclick="posts_vote(this);" title="Голосовать могут только зарегистрированные пользователи " disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
          </div>
        </li>
    <li class="post-stats__item post-stats__item_bookmark">
      <button type="button" class="btn bookmark-btn bookmark-btn_post " data-post-type="publish_corp" data-type="2" data-id="269465" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в закладки" onclick="posts_add_to_favorite(this);" disabled="">
        <span class="btn_inner"><svg class="icon-svg_bookmark" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="bookmark__counter js-favs_count" title="Количество пользователей, добавивших публикацию в закладки">1044</span></span>
      </button>
    </li>

    <li class="post-stats__item post-stats__item_views">
      <div class="post-stats__views" title="Количество просмотров">
        <svg class="icon-svg_views-count" width="21" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-stats__views-count">142k</span>
      </div>
    </li>

      <li class="post-stats__item post-stats__item_comments">
          <a href="https://habr.com/ru/company/mailru/blog/269465/#comments" class="post-stats__comments-link" rel="nofollow">
            <svg class="icon-svg_post-comments" width="16" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-stats__comments-count" title="Читать комментарии">121</span>
          </a>
      </li>





  </ul>

            <form action="https://habr.com/json/complaints/add/" class="form form_bordered form_abuse hidden" method="post" id="abuse_form">
  <input type="hidden" name="tt" value="2">
  <input type="hidden" name="ti" value="269465">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Нарушение</legend>
    <input type="text" name="text" class="form__text-field">
    <span class="form__desc">Опишите суть нарушения</span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="">Отправить</button>
  </div>
</form>


              <form action="https://habr.com/conversations/drfisher/" method="GET" class="form form_bordered form_admin-causes hidden" id="admin_causes">

    <input type="hidden" name="moderation" value="269465">

    <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

    <fieldset class="form__fieldset form__fieldset_admin-causes">
      <legend class="form__legend">Выберите рекомендации для отправки автору:</legend>

      <div class="checkbox-group_columns">
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="1">
          <span class="checkbox__label">Указан только блог</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="2">
          <span class="checkbox__label">Орфографические ошибки</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="3">
          <span class="checkbox__label">Пунктуационные ошибки</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="4">
          <span class="checkbox__label">Отступы</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="5">
          <span class="checkbox__label">Текст-простыня</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="6">
          <span class="checkbox__label">Короткие предложения</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="7">
          <span class="checkbox__label">Смайлики</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="8">
          <span class="checkbox__label">Много форматирования</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="9">
          <span class="checkbox__label">Картинки</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="10">
          <span class="checkbox__label">Ссылки</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="11">
          <span class="checkbox__label">Оформление кода</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="12">
          <span class="checkbox__label">Рекламный характер</span>
        </label>
      </div>
    </fieldset>

    <div class="form__footer">
      <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="">Отправить</button>
    </div>
  </form>


            <div class="company-info company-info_post-additional">
              <div class="company-info__about">
                <div class="media-obj media-obj_company">
    <a href="https://habr.com/company/mailru/" class="media-obj__image page-header__image">
        <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/1c179ce792168371a7fe9556db69dc7d.png" width="48" height="48" class="company-info__image-pic">
    </a>

  <div class="media-obj__body media-obj__body_page-header media-obj__body_page-header_branding">

    <div class="page-header__info">
        <div class="page-header__info-title">Mail.ru Group</div>
        <sup class="page-header__stats-value page-header__stats-value_branding" title="Рейтинг компании">1&nbsp;073,99</sup>
        <div class="page-header__info-desc">
          Строим Интернет
        </div>
    </div>
  </div>
</div>


              </div>
              <div class="company-info__author">
                <div class="user-info">
    <div class="user-info__stats">
  <div class="media-obj media-obj_user-info">
    <a href="https://habr.com/ru/users/drfisher/" class="media-obj__image" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;author_info_top&#39;, &#39;profile&#39;, &#39;drfisher&#39;);}">
        <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98.jpg" width="48" height="48" class="media-obj__image-pic media-obj__image-pic_user">
    </a>

    <div class="media-obj__body media-obj__body_user-info">
          <a href="https://habr.com/ru/info/help/karma/" class="user-info__stats-item stacked-counter" title="70 голосов">
            <div class="stacked-counter__value stacked-counter__value_green ">50,0</div>
            <div class="stacked-counter__label">Карма</div>
          </a>

        <a href="https://habr.com/ru/info/help/karma/#rating" class="user-info__stats-item stacked-counter stacked-counter_rating" title="Рейтинг пользователя">
          <div class="stacked-counter__value stacked-counter__value_magenta">65,7</div>
          <div class="stacked-counter__label">Рейтинг</div>
        </a>

        <a href="https://habr.com/ru/users/drfisher/subscription/followers/" class="user-info__stats-item stacked-counter stacked-counter_subscribers" title="Количество подписчиков">
          <div class="stacked-counter__value stacked-counter__value_blue">5</div>
          <div class="stacked-counter__label">Подписчики</div>
        </a>

        <a href="https://habr.com/ru/users/drfisher/subscription/follow/" class="user-info__stats-item stacked-counter stacked-counter_subscribers" title="Количество подписок">
          <div class="stacked-counter__value stacked-counter__value_blue">1</div>
          <div class="stacked-counter__label">Подписки</div>
        </a>
    </div>
  </div>

</div>


  <div class="user-info__about">
    <div class="user-info__links">
        <a href="https://habr.com/ru/users/drfisher/" class="user-info__fullname" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;author_info_top&#39;, &#39;profile&#39;, &#39;drfisher&#39;);}">Павел Рыбин</a>&nbsp;<a href="https://habr.com/users/drfisher/" class="user-info__nickname user-info__nickname_doggy" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;author_info_top&#39;, &#39;profile&#39;, &#39;drfisher&#39;);}">drfisher</a>
        
    </div>

      <div class="user-info__specialization">Пользователь</div>
  </div>

</div>

              </div>
                  <ul class="company-info__contacts inline-list">
          <li class="inline-list__item inline-list__item_contact-link"><a href="https://facebook.com/mailrugroup">Facebook</a></li>
          <li class="inline-list__item inline-list__item_contact-link"><a href="https://twitter.com/mailru">Twitter</a></li>
          <li class="inline-list__item inline-list__item_contact-link"><a href="https://vk.com/mailru">ВКонтакте</a></li>
          <li class="inline-list__item inline-list__item_contact-link"><a href="https://instagram.com/mailrugroup/">Instagram</a></li>
    </ul>

            </div>
            <div class="post-share">
  <span class="post-share__title">Поделиться публикацией</span>
  <ul class="post-share__buttons social-icons">
    <li class="social-icons__item social-icons__item_post">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://habr.com/ru/company/mailru/blog/269465/" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, &#39;Опубликовать ссылку в Facebook&#39;, &#39;width=640,height=436,toolbar=0,status=0&#39;); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://twitter.com/intent/tweet?text=%D0%A3+%D0%BD%D0%B0%D1%81+%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B+%D1%81+%D0%BF%D1%80%D0%BE%D0%BC%D0%B8%D1%81%D0%B0%D0%BC%D0%B8+https://habr.com/p/269465/+via+%40habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter" title="Опубликовать ссылку в Twitter" onclick="window.open(this.href, &#39;Опубликовать ссылку в Twitter&#39;, &#39;width=800,height=300,resizable=yes,toolbar=0,status=0&#39;); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://vk.com/share.php?url=https://habr.com/ru/company/mailru/blog/269465/" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, &#39;Опубликовать ссылку во ВКонтакте&#39;, &#39;width=800,height=300,toolbar=0,status=0&#39;); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://t.me/share/url?url=https://habr.com/ru/company/mailru/blog/269465/&amp;title=%D0%A3%20%D0%BD%D0%B0%D1%81%20%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B%20%D1%81%20%D0%BF%D1%80%D0%BE%D0%BC%D0%B8%D1%81%D0%B0%D0%BC%D0%B8" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram" title="Поделиться ссылкой в Telegram" onclick="window.open(this.href, &#39;Поделиться ссылкой в Telegram&#39;, &#39;width=800,height=300,toolbar=0,status=0&#39;); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://getpocket.com/edit?url=https://habr.com/ru/company/mailru/blog/269465/&amp;title=%D0%A3%20%D0%BD%D0%B0%D1%81%20%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B%20%D1%81%20%D0%BF%D1%80%D0%BE%D0%BC%D0%B8%D1%81%D0%B0%D0%BC%D0%B8" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_pocket" title="Добавить ссылку в Pocket" target="_blank" rel=" noopener">
      </a>
    </li>
  </ul>
</div>

            
        </div>

          

    <div class="default-block default-block_content">
      <div class="default-block__header default-block__header_large">
        <h2 class="default-block__header-title default-block__header-title_large">Похожие публикации</h2>
      </div>
      <div class="default-block__content">

        <ul class="content-list">
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">6 июня 2017 в 16:38</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/330048/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, &#39;common&#39;, &#39;1&#39;); }">
                    Понимание событийной архитектуры Node.js
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+27</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">23,8k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">166</span>
                </span>
                <a href="https://habr.com/ru/post/330048#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">9</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">11 мая 2016 в 11:04</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/283228/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, &#39;common&#39;, &#39;2&#39;); }">
                    Вы не знаете Node: краткий обзор основных возможностей
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+38</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">72,2k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">421</span>
                </span>
                <a href="https://habr.com/ru/post/283228#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">32</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">16 апреля 2015 в 18:42</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/255895/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, &#39;common&#39;, &#39;3&#39;); }">
                    10 основных ошибок при разработке на Node.js
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+63</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">68,2k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">636</span>
                </span>
                <a href="https://habr.com/ru/post/255895#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">45</span>
                </a>
              </div>
            </li>
        </ul>

      </div>
    </div>

        

  <div class="promo-block promo-block_vacancies">
    <h3 class="promo-block__header promo-block__header_justify">
      <span class="promo-block__header-wrap">
        <a href="https://moikrug.ru/companies/mailrugroup/vacancies" target="_blank" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=block_name&amp;utm_campaign=vacancies_company" class="promo-block__title-link" rel=" noopener">
          <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/1c179ce792168371a7fe9556db69dc7d.png" width="28" height="28" class="promo-block__title-img">
          Вакансии компании Mail.ru Group
        </a>
      </span>
      <a href="https://moikrug.ru/" target="_blank" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=block_logo&amp;utm_campaign=vacancies_company" class="icon-svg_logo-mk" rel="nofollow noopener"><svg class="icon-svg" width="114" height="24" viewBox="0 0 114 24" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><path d="M9.383 7.685l-4.127-6.87h-5.258v17.614h4.931v-10.166l3.497 5.963h1.938l3.497-5.963v10.166h4.931v-17.614h-5.258zM27.726 5.47c-3.673 0-6.667 2.994-6.667 6.667s2.994 6.667 6.667 6.667c3.673 0 6.667-2.994 6.667-6.667.001-3.673-2.993-6.667-6.667-6.667zm0 8.908c-1.208 0-2.239-.982-2.239-2.239 0-1.208 1.032-2.239 2.239-2.239s2.239 1.032 2.239 2.239c.001 1.257-1.031 2.239-2.239 2.239zM40.835 11.735v-5.888h-4.68v12.582h4.68l4.152-5.888v5.888h4.68v-12.582h-4.68zM47.906 3.055l-1.359-2.617c-1.309.704-2.617.982-3.623.982s-2.341-.278-3.649-.982l-1.359 2.617c1.811.982 3.397 1.283 5.007 1.283s3.171-.303 4.983-1.283zM57.971 5.847v12.582h4.68v-12.582zM71.432 5.847h-4.931l-3.849 6.19 4.101 6.392h4.933l-4.353-6.392zM81.12 5.47c-1.283 0-2.667.806-3.246 2.013v-1.635h-4.68v17.713h4.68v-6.768c.578 1.208 1.962 2.013 3.246 2.013 3.673 0 5.662-2.994 5.662-6.667s-1.989-6.667-5.662-6.667zm-1.51 8.908c-.68 0-1.309-.327-1.736-.856v-2.792c.427-.503 1.057-.83 1.736-.83 1.208 0 2.239.982 2.239 2.239.001 1.207-1.031 2.239-2.239 2.239zM94.909 12.692l-2.666-6.845h-5.083l5.335 12.557-2.165 5.158h4.655l7.926-17.714h-5.082zM104.042 5.847v12.582h4.68v-8.304h5.561v-4.278z"></path></svg></a>
    </h3>

    <div class="promo-block__content">
      <ul class="content-list content-list_promo">
          <li class="content-list__item content-list__item_promo">
            <a href="https://moikrug.ru/vacancies/1000052710" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_company">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Unity3D / C# разработчик </span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">Москва</span>
      <span class="promo-item__attrs-item">Полный рабочий день</span>
    </div>
  </div>


</a>







          </li>
          <li class="content-list__item content-list__item_promo">
            <a href="https://moikrug.ru/vacancies/1000052641" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_company">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Ведущий Frontend-разработчик</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">Москва</span>
      <span class="promo-item__attrs-item">Полный рабочий день</span>
    </div>
  </div>


</a>







          </li>
      </ul>
    </div>

    <div class="promo-block__footer">
      <a href="https://moikrug.ru/companies/mailrugroup/vacancies/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancies_all&amp;utm_campaign=vacancies_company" class="promo-block__footer-link promo-block__footer-link_selected" target="_blank" rel="nofollow noopener">Вакансии компании</a>
      <a href="https://moikrug.ru/info/employer/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;&amp;utm_content=vacancy_add&amp;utm_campaign=vacancies_company" class="promo-block__footer-link" target="_blank" rel="nofollow noopener">Создать резюме</a>
    </div>
  </div>


            <div class="comments-section" id="comments">
    <header class="comments-section__head">
      <h2 class="comments-section__head-title">
        Комментарии
        <span class="comments-section__head-counter" id="comments_count">
          121
        </span>
      </h2>
      
    </header>
    
    

    <ul class="content-list content-list_comments" id="comments-list">
        <li class="content-list__item content-list__item_comment js-comment " rel="8626869">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626869">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626869">
          <a href="https://habr.com/ru/users/Zveroloff/" class="user-info user-info_inline" data-user-login="Zveroloff">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/9629fe36ad6233ab0c4a441a00b2a093.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Zveroloff</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 10:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626869" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626869" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626869" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626869" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626869" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +19: ↑20 и ↓1">+19</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Чего-то я лох, по-моему…</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626869"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8626891">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626891">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626891">
          <a href="https://habr.com/ru/users/kwolfy/" class="user-info user-info_inline" data-user-login="kwolfy">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/804902b51bcbcaa57ba491fb2594fe36.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kwolfy</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 10:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626891" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626891" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626891" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626891" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626891" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">За Promise.resolve() спасибо</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626891"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8626895">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626895">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626895">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 10:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626895" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626895" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626895" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626895" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626895" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +9: ↑9 и ↓0">+9</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Полезная статья. Действительно типовые ошибки. Попадись мне эта статья годом ранее, на многие грабли не пришлось бы наступать самостоятельно.<br>
<br>
<blockquote>Продвинутая ошибка №5 — «проваливание» сквозь промисы</blockquote>А вот этого я не знал. Не ожидал такого поведения. Даже странно, как это я ещё не напоролся на это через какой-нибудь баг. Правда не совсем понятно, зачем они так сделали?!<br>
<br>
<blockquote>Ждем async/await</blockquote>А пока ждём, на серверной стороне, можно использовать связку co + generator-ы или ей подобную. Получаем практически тоже самое, с практически таким же синтаксисом. Причём без транспиляторов. </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626895">  <li class="content-list__item content-list__item_comment js-comment " rel="8627111">
    
    <span class="parent_id" data-parent_id="8626895"></span>
    <div class="comment" id="comment_8627111">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627111">
          <a href="https://habr.com/ru/users/hell0w0rd/" class="user-info user-info_inline" data-user-login="hell0w0rd">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/69a049d65ec38c50c841e8b93b3f1c41.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">hell0w0rd</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 13:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627111" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627111" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627111" data-parent_id="8626895" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626895" class="icon_comment-arrow-up js-comment_parent" data-id="8627111" data-parent_id="8626895" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627111" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627111" data-parent_id="8626895" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627111" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">co — медленная библиотека. Используйте bluebird.coroutine.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627111">  <li class="content-list__item content-list__item_comment js-comment " rel="8628711">
    
    <span class="parent_id" data-parent_id="8627111"></span>
    <div class="comment" id="comment_8628711">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628711">
          <a href="https://habr.com/ru/users/Santacruz/" class="user-info user-info_inline" data-user-login="Santacruz">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/d62b841a19587d37ea7752d0f6f2248d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Santacruz</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 11:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628711" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628711" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628711" data-parent_id="8627111" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627111" class="icon_comment-arrow-up js-comment_parent" data-id="8628711" data-parent_id="8627111" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628711" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628711" data-parent_id="8627111" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628711" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Опа… а catch есть? в описании не видно</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8628711">  <li class="content-list__item content-list__item_comment js-comment " rel="8629953">
    
    <span class="parent_id" data-parent_id="8628711"></span>
    <div class="comment" id="comment_8629953">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629953">
          <a href="https://habr.com/ru/users/hell0w0rd/" class="user-info user-info_inline" data-user-login="hell0w0rd">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/69a049d65ec38c50c841e8b93b3f1c41.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">hell0w0rd</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 17:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629953" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629953" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629953" data-parent_id="8628711" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628711" class="icon_comment-arrow-up js-comment_parent" data-id="8629953" data-parent_id="8628711" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629953" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629953" data-parent_id="8628711" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629953" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">catch?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8629953"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8689209">
    
    <span class="parent_id" data-parent_id="8627111"></span>
    <div class="comment" id="comment_8689209">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8689209">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 декабря 2015 в 07:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8689209" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8689209" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8689209" data-parent_id="8627111" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627111" class="icon_comment-arrow-up js-comment_parent" data-id="8689209" data-parent_id="8627111" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8689209" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8689209" data-parent_id="8627111" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8689209" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Решил сравнить. Оказалось, что для bluebird.coroutine нужно предварительно все генераторы конвертировать в методы, возвращающие promise. Т.к. yield-ить итераторы генераторов она из коробки не умеет. Подключил такую возможность ― получил прирост производительности (в синтетическом тесте) <a href="https://gist.github.com/faiwer/c8e18a7a92125ceaff8a">примерно на 1/3</a>. Нууу… неплохо :)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8689209"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8626951">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626951">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626951">
          <a href="https://habr.com/ru/users/k12th/" class="user-info user-info_inline" data-user-login="k12th">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/b7619fe4dce6ed04d6970d30bb3f62da.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">k12th</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 11:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626951" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626951" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626951" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626951" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626951" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑3 и ↓3">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Также такой подход очень удобен для отлавливания любых синхронных ошибок. Он настолько удобен, что я использую его почти во всех методах API, возвращающих промисы:<br>
&lt;...&gt;<br>
Просто запомните, любой код, который может выдать синхронную ошибку — потенциальная проблема при отладке из-за «проглоченных» ошибок. Но если вы обернете его в Promise.resolve(), то можете быть уверены, что поймаете ее при помощи catch().</blockquote><br>
Ну-ну. Больше коллбэков для бога коллбэков!</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626951"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8626979">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626979">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626979">
          <a href="https://habr.com/ru/users/aenesterov/" class="user-info user-info_inline" data-user-login="aenesterov">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">aenesterov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 11:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626979" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626979" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626979" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626979" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626979" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +8: ↑8 и ↓0">+8</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="http://bevacqua.github.io/promisees/">Здесь</a> можно посмотреть визуализацию работы promise, может быть полезна для лучшего их понимая.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626979"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8626999">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8626999">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8626999">
          <a href="https://habr.com/ru/users/Lisio/" class="user-info user-info_inline" data-user-login="Lisio">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/03211eec5d48ae0ecfb19282398426a1.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Lisio</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 12:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626999" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8626999" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626999" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8626999" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8626999" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Могу ошибиться, но в примере к ошибке №1 получившийся код хоть и выглядит красивее, но работать не будет. По крайней мере, в исходной задаче видно, что put делается для каждого объекта из массива результатов, а в отрефакторенной — один put на весь массив.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8626999">  <li class="content-list__item content-list__item_comment js-comment " rel="8627017">
    
    <span class="parent_id" data-parent_id="8626999"></span>
    <div class="comment" id="comment_8627017">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627017">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 12:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627017" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627017" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627017" data-parent_id="8626999" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8626999" class="icon_comment-arrow-up js-comment_parent" data-id="8627017" data-parent_id="8626999" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627017" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627017" data-parent_id="8626999" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627017" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, этот момент потом в примере номер 2 разобран</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627017">  <li class="content-list__item content-list__item_comment js-comment " rel="8627077">
    
    <span class="parent_id" data-parent_id="8627017"></span>
    <div class="comment" id="comment_8627077">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627077">
          <a href="https://habr.com/ru/users/Lisio/" class="user-info user-info_inline" data-user-login="Lisio">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/03211eec5d48ae0ecfb19282398426a1.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Lisio</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 13:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627077" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627077" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627077" data-parent_id="8627017" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627017" class="icon_comment-arrow-up js-comment_parent" data-id="8627077" data-parent_id="8627017" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627077" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627077" data-parent_id="8627017" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627077" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Частично, но это не делает первый пример рабочим. Не покидает ощущение, что код просто подогнали так, чтобы с первого взгляда выглядел красивым. Если применить технику из второго примера на все шаги из первого, то картина может получиться сильно хуже.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8627077"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627047">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627047">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627047">
          <a href="https://habr.com/ru/users/musuk/" class="user-info user-info_inline" data-user-login="musuk">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/2bbd83ae15f835b66cd54919ba4e0b48.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">musuk</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 12:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627047" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627047" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627047" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627047" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627047" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑2 и ↓1">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">После того, как в node.js появилась нормальная поддержка генераторов без специальных ключей можно просто пользоваться bluebird Promise.coroutine и получать красивый асинхронный код с нормальными try… catch… и ветвлениями и отменой операций без боли.<br>
<br>
Почувствуй разницу между:<br>
<br>
<pre><code class="javascript hljs">doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomethingElse();
});
</code></pre><br>
<br>
и<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.coroutine(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">*(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> doSomething();
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> doSomethingElse();
})();
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627047">  <li class="content-list__item content-list__item_comment js-comment " rel="8627067">
    
    <span class="parent_id" data-parent_id="8627047"></span>
    <div class="comment" id="comment_8627067">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627067">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 13:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627067" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627067" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627067" data-parent_id="8627047" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627047" class="icon_comment-arrow-up js-comment_parent" data-id="8627067" data-parent_id="8627047" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627067" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627067" data-parent_id="8627047" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627067" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">а с async/await (которые вроде как уже <a href="https://babeljs.io/docs/usage/experimental/">заимплеменчены</a> в babel на этой основе) это еще и читабельным будет.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627067">  <li class="content-list__item content-list__item_comment js-comment " rel="8627423">
    
    <span class="parent_id" data-parent_id="8627067"></span>
    <div class="comment" id="comment_8627423">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627423">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 16:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627423" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627423" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627423" data-parent_id="8627067" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627067" class="icon_comment-arrow-up js-comment_parent" data-id="8627423" data-parent_id="8627067" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627423" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627423" data-parent_id="8627067" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627423" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так они недавно (в сентябре) еще и перешли в статус <a href="http://tc39.github.io/ecmascript-asyncawait/#status">Stage 3 (Candidate)</a>.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8627423"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627297">
    
    <span class="parent_id" data-parent_id="8627047"></span>
    <div class="comment" id="comment_8627297">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627297">
          <a href="https://habr.com/ru/users/KlonD90/" class="user-info user-info_inline" data-user-login="KlonD90">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KlonD90</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 15:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627297" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627297" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627297" data-parent_id="8627047" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627047" class="icon_comment-arrow-up js-comment_parent" data-id="8627297" data-parent_id="8627047" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627297" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627297" data-parent_id="8627047" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627297" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Эти генераторы не такие уж веселые на вид. Вы реально их используете в продакшене?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627297">  <li class="content-list__item content-list__item_comment js-comment " rel="8627319">
    
    <span class="parent_id" data-parent_id="8627297"></span>
    <div class="comment" id="comment_8627319">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627319">
          <a href="https://habr.com/ru/users/musuk/" class="user-info user-info_inline" data-user-login="musuk">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/2bbd83ae15f835b66cd54919ba4e0b48.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">musuk</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 15:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627319" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627319" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627319" data-parent_id="8627297" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627297" class="icon_comment-arrow-up js-comment_parent" data-id="8627319" data-parent_id="8627297" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627319" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627319" data-parent_id="8627297" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627319" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Что в них невесёлого, когда есть Promise.coroutine? <br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8627319">  <li class="content-list__item content-list__item_comment js-comment " rel="8627441">
    
    <span class="parent_id" data-parent_id="8627319"></span>
    <div class="comment" id="comment_8627441">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627441">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 16:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627441" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627441" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627441" data-parent_id="8627319" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627319" class="icon_comment-arrow-up js-comment_parent" data-id="8627441" data-parent_id="8627319" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627441" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627441" data-parent_id="8627319" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627441" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В этом плане я совершенно согласен с <a href="https://twitter.com/domenic">Домеником Деникола</a>, что генераторы для «синхронности в асинхронном коде» — это больше хак и workaround, они изначально задумывались для других целей. И async/await — именно для управления асинхронным потоком исполнения в приложении, а генераторы останутся для того, для чего были задуманы изначально (итерация, удобные ко-рутины).<br>
<br>
<img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f86002d77f5965ffefc01d671c2f4d01.jpg" alt="image"></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8627441">  <li class="content-list__item content-list__item_comment js-comment " rel="8635551">
    
    <span class="parent_id" data-parent_id="8627441"></span>
    <div class="comment" id="comment_8635551">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8635551">
          <a href="https://habr.com/ru/users/sompylasar/" class="user-info user-info_inline" data-user-login="sompylasar">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/ab97cb572a3ea9484f9a27629b58784a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">sompylasar</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">31 октября 2015 в 00:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8635551" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8635551" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8635551" data-parent_id="8627441" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627441" class="icon_comment-arrow-up js-comment_parent" data-id="8635551" data-parent_id="8627441" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8635551" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8635551" data-parent_id="8627441" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8635551" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Интересно, что MS в своем движке браузера Chakra реализовали async/await как раз при помощи генераторов и yield:<br>
<a href="http://habrahabr.ru/company/microsoft/blog/269871/">habrahabr.ru/company/microsoft/blog/269871</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8635551"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627525">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627525">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627525">
          <a href="https://habr.com/ru/users/tyomitch/" class="user-info user-info_inline" data-user-login="tyomitch">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/b71804e6dcbec22ada05c488b7ee4c1b.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tyomitch</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 17:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627525" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627525" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627525" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627525" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627525" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Что за подвох? Откуда в решениях задачи <code>finalHandler</code>, если в условии его не было?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627525">  <li class="content-list__item content-list__item_comment js-comment " rel="8627539">
    
    <span class="parent_id" data-parent_id="8627525"></span>
    <div class="comment" id="comment_8627539">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8627539">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 17:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627539" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627539" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627539" data-parent_id="8627525" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627525" class="icon_comment-arrow-up js-comment_parent" data-id="8627539" data-parent_id="8627525" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627539" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627539" data-parent_id="8627525" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627539" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Думаю, автор имел в виду конструкцию <a href="https://twitter.com/nolanlawson/status/578948854411878400">/*...*/ из оригинального твита</a>. Спасибо за наблюдательность!</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627539"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627567">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627567">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627567">
          <a href="https://habr.com/ru/users/Imira_crai/" class="user-info user-info_inline" data-user-login="Imira_crai">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/5995a46f1ad4e3ba11d0c1b8a76d2d22.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Imira_crai</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 17:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627567" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627567" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627567" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627567" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627567" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">На мой взгляд, приведенная задача не охватывает большинства ошибок, которые в статьи были описаны. Например, я задачу решил верно, но при этом узнал много нового о промисах из статьи.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627567"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627613">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627613">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627613">
          <a href="https://habr.com/ru/users/SamVimes/" class="user-info user-info_inline" data-user-login="SamVimes">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/737abf11b8f97137c916e45a3782790d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">SamVimes</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627613" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627613" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627613" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627613" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627613" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑3 и ↓1">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Мне кажется, или для пазла 2 ошибка в ответе? (и соответственно для всего, где похожие ситуации):<br>
<pre><code class="javascript hljs">doSomething
|-----------------|
                  doSomethingElse(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>)
                  |------------------|
                  finalHandler(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>)
                  |------------------|
</code></pre><br>
finalHandler вызовется после того, как doSomethingElse закончит работу. Возможно, автор имел в виду, что если в then вернётся promise, то в then для then будет результат этого промиса?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627613">  <li class="content-list__item content-list__item_comment js-comment " rel="8627639">
    
    <span class="parent_id" data-parent_id="8627613"></span>
    <div class="comment" id="comment_8627639">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8627639">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627639" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627639" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627639" data-parent_id="8627613" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627613" class="icon_comment-arrow-up js-comment_parent" data-id="8627639" data-parent_id="8627613" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627639" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627639" data-parent_id="8627613" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627639" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑1 и ↓2">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Если бы перед doSomethingElse стоял return, то да, finalHandler ждал бы выполнения промиса из doSomethingElse. В нашем же случае мы имеем дело со «сторонним эффектом», где doSomethingElse выполняется, возможно даже возвращает промис, вот только использовать в finalHandler мы его не сможем.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627639">  <li class="content-list__item content-list__item_comment js-comment " rel="8627643">
    
    <span class="parent_id" data-parent_id="8627639"></span>
    <div class="comment" id="comment_8627643">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627643">
          <a href="https://habr.com/ru/users/SamVimes/" class="user-info user-info_inline" data-user-login="SamVimes">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/737abf11b8f97137c916e45a3782790d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">SamVimes</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627643" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627643" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627643" data-parent_id="8627639" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627639" class="icon_comment-arrow-up js-comment_parent" data-id="8627643" data-parent_id="8627639" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627643" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627643" data-parent_id="8627639" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627643" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑2 и ↓1">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, я это понимаю. Просто «схема» может сбить с толку тех, кто плохо знаком с промисами. Она ведь не совсем так должна выглядеть. doSomethingElse выполнится в любом случае до finalHandler, мы не знаем что он возвращает, да нас это и не интересует:)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8627643">  <li class="content-list__item content-list__item_comment js-comment " rel="8627665">
    
    <span class="parent_id" data-parent_id="8627643"></span>
    <div class="comment" id="comment_8627665">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8627665">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627665" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627665" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627665" data-parent_id="8627643" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627643" class="icon_comment-arrow-up js-comment_parent" data-id="8627665" data-parent_id="8627643" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627665" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627665" data-parent_id="8627643" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627665" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Здесь скорей имеется в виду, что начнут они свое выполнение одновременно (почти). При этом внутри функции doSomethingElse может быть какой-нибудь долгий ajax-запрос, результат которого придет только через несколько секунд (предположим, что интернет барахлит), а значит закончит свою работу она значительно позже.<br>
Если бы перед вызовом doSomethingElse стоял return, то finalHandler честно бы ждал результат ajax-запроса.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8627665">  <li class="content-list__item content-list__item_comment js-comment " rel="8627677">
    
    <span class="parent_id" data-parent_id="8627665"></span>
    <div class="comment" id="comment_8627677">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627677">
          <a href="https://habr.com/ru/users/SamVimes/" class="user-info user-info_inline" data-user-login="SamVimes">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/737abf11b8f97137c916e45a3782790d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">SamVimes</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627677" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627677" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627677" data-parent_id="8627665" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627665" class="icon_comment-arrow-up js-comment_parent" data-id="8627677" data-parent_id="8627665" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627677" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627677" data-parent_id="8627665" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627677" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑4 и ↓2">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Но почему почти? У нас всё в одном потоке тут, вызовы идут подряд. То что return promise будет ждать выполнения этого самого промиса это просто то, как обрабатывается результат then. <br>
<pre><code class="javascript hljs">.then(f1).then(f2)
</code></pre><br>
Функция f1, которую мы в then передаём выполниться раньше чем f2.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8627677">  <li class="content-list__item content-list__item_comment js-comment " rel="8628073">
    
    <span class="parent_id" data-parent_id="8627677"></span>
    <div class="comment" id="comment_8628073">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628073">
          <a href="https://habr.com/ru/users/SamVimes/" class="user-info user-info_inline" data-user-login="SamVimes">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/737abf11b8f97137c916e45a3782790d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">SamVimes</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 22:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628073" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628073" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628073" data-parent_id="8627677" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627677" class="icon_comment-arrow-up js-comment_parent" data-id="8628073" data-parent_id="8627677" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628073" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628073" data-parent_id="8627677" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628073" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑4 и ↓2">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну вот нифига себе, я правильно пишу, а мне минусы ставят. Как же так :( Хоть бы причину писали</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8628073"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628151">
    
    <span class="parent_id" data-parent_id="8627665"></span>
    <div class="comment" id="comment_8628151">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628151">
          <a href="https://habr.com/ru/users/defuz/" class="user-info user-info_inline" data-user-login="defuz">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/04086c572df8e67c3ce62213ef8a9f73.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">defuz</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 23:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628151" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628151" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628151" data-parent_id="8627665" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627665" class="icon_comment-arrow-up js-comment_parent" data-id="8628151" data-parent_id="8627665" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628151" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628151" data-parent_id="8627665" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628151" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑2 и ↓1">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Начнут выполнение одновременно? В javascript? Вы серьезно?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8628151"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628177">
    
    <span class="parent_id" data-parent_id="8627665"></span>
    <div class="comment" id="comment_8628177">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628177">
          <a href="https://habr.com/ru/users/defuz/" class="user-info user-info_inline" data-user-login="defuz">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/04086c572df8e67c3ce62213ef8a9f73.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">defuz</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 00:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628177" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628177" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628177" data-parent_id="8627665" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627665" class="icon_comment-arrow-up js-comment_parent" data-id="8628177" data-parent_id="8627665" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628177" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628177" data-parent_id="8627665" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628177" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Простите за грубость, но вы написали такую ерунду, которую нельзя вообще писать.<br>
<blockquote>Здесь скорей имеется в виду, что начнут они свое выполнение одновременно (почти).</blockquote>Движок javascript выполнеяется в однопоточном eventloop, так что никакие две нормальные функции вообще никогда не могут выполнятся одновременно.<br>
<blockquote>При этом внутри функции doSomethingElse может быть какой-нибудь долгий ajax-запрос, результат которого придет только через несколько секунд (предположим, что интернет барахлит), а значит закончит свою работу она значительно позже.</blockquote>Функция, которая инициировала ajax-запрос всегда выполняется раньше, чем будет завершен этот ajax-запрос (и будет вызван его обработчик).<br>
<blockquote>Если бы перед вызовом doSomethingElse стоял return, то finalHandler честно бы ждал результат ajax-запроса.</blockquote>Нет, потому что сама функция doSomethingElse может не возвращать promise этого ajax-запроса.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8628177">  <li class="content-list__item content-list__item_comment js-comment " rel="8628493">
    
    <span class="parent_id" data-parent_id="8628177"></span>
    <div class="comment" id="comment_8628493">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8628493">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 08:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628493" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628493" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628493" data-parent_id="8628177" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628177" class="icon_comment-arrow-up js-comment_parent" data-id="8628493" data-parent_id="8628177" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628493" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628493" data-parent_id="8628177" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628493" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Под <i>«одновременно (почти)»</i> я имел в виду не <i>«параллельно»</i>, а <i>«сразу, без ожидания»</i>. Я говорил не о том, когда функции начнут и завершат свою работу буквально. Я имел в виду полное завершение их внутренних задач, в асинхронной логике это получение результата.<br>
Простите, что смутил вас и спасибо за ваше уточнение!</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8628493"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627697">
    
    <span class="parent_id" data-parent_id="8627643"></span>
    <div class="comment" id="comment_8627697">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627697">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627697" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627697" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627697" data-parent_id="8627643" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627643" class="icon_comment-arrow-up js-comment_parent" data-id="8627697" data-parent_id="8627643" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627697" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627697" data-parent_id="8627643" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627697" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">На этих схемах показан не синхронный поток выполнения, а асинхронный: под <code>doSomethingElse(undefined)</code> понимается не только сам вызов функции, но и завершение того промиса, который эта функция вернула.<br>
<br>
Вот, кстати, еще одна проблема с промисами, неназванная в статье. Непонимание того факта, что как только в программу вводятся элементы асинхронности, потоки управления начинают выглядеть по-разному в зависимости от того, с синхронной или асинхронной точек зрения мы их рассматриваем.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8627697">  <li class="content-list__item content-list__item_comment js-comment " rel="8627717">
    
    <span class="parent_id" data-parent_id="8627697"></span>
    <div class="comment" id="comment_8627717">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627717">
          <a href="https://habr.com/ru/users/SamVimes/" class="user-info user-info_inline" data-user-login="SamVimes">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/737abf11b8f97137c916e45a3782790d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">SamVimes</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 18:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627717" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627717" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627717" data-parent_id="8627697" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627697" class="icon_comment-arrow-up js-comment_parent" data-id="8627717" data-parent_id="8627697" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627717" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627717" data-parent_id="8627697" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627717" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Такой ответ мне нравится. Но, лучше на схеме указывать, что имеется в виду:-) А то гадать какая тут у автора точка зрения, это не очень круто.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8627717"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627729">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627729">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627729">
          <a href="https://habr.com/ru/users/DmitryO/" class="user-info user-info_inline" data-user-login="DmitryO">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/121c28ccc870a23cb32636c68cffc932.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">DmitryO</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 19:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627729" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627729" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627729" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627729" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627729" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –8: ↑0 и ↓8">–8</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">Я понимаю, что в современном мире можно подогнать любую тему под практически любую технологию, и статья хороша, но…<br>
<br>
Что этот перевод делает в блоге компании Mail.ru?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627729"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627897">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627897">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627897">
          <a href="https://habr.com/ru/users/Blumfontein/" class="user-info user-info_inline" data-user-login="Blumfontein">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8d3a6783ce09078319648ef11ed197d9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Blumfontein</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 21:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627897" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627897" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627897" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627897" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627897" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Эммм, может я что-то не понимаю, откуда finalHandler из примера 2 знает, возвращает function() {doSomethingElse()} что-то или не возвращает? Это в примере все довольно просто, а на практике там может быть 10-этажный switch или if/else, и там в зависимости от условий может возвращаться значение, а может и не возвращаться… Ну т.е. then(finalHandler) должен дождаться выполнения предыдущего then для того, чтобы понять, возвращает или не возвращает что-то он.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627897">  <li class="content-list__item content-list__item_comment js-comment " rel="8627907">
    
    <span class="parent_id" data-parent_id="8627897"></span>
    <div class="comment" id="comment_8627907">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8627907">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 21:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627907" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627907" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627907" data-parent_id="8627897" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627897" class="icon_comment-arrow-up js-comment_parent" data-id="8627907" data-parent_id="8627897" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627907" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627907" data-parent_id="8627897" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627907" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В примере 2 finalHandler не знает, что возвращает функция doSomethingElse. Мало того, она даже не знает, что doSomethingElse существует, потому что результат ее работы улетает «в пустоту». В примере 2 finalHandler сразу получает на вход undefined (значение, возвращаемое любой функцией по умолчанию).<br>
<br>
Возникает вопрос, как можно пробросить результат работы doSomethingElse в finalHandler? Ответ простой — добавить перед ее вызовом return:<br>
<br>
<pre><code class="javascript hljs">doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    doSomethingElse();
  })
  .then(finalHandler); <span class="hljs-comment"><span class="hljs-comment">// undefind</span></span>

doSomething().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doSomethingElse(); <span class="hljs-comment"><span class="hljs-comment">// "возвращаем" результат работы вложенной функции</span></span>
  })
  .then(finalHandler); <span class="hljs-comment"><span class="hljs-comment">// тут finalHandler получит на вход результат doSomethingElse</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// и, если это промис, то дождется его "выполнения", а значит и результат его выполнения</span></span>
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627907">  <li class="content-list__item content-list__item_comment js-comment " rel="8627919">
    
    <span class="parent_id" data-parent_id="8627907"></span>
    <div class="comment" id="comment_8627919">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627919">
          <a href="https://habr.com/ru/users/Blumfontein/" class="user-info user-info_inline" data-user-login="Blumfontein">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8d3a6783ce09078319648ef11ed197d9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Blumfontein</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 21:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627919" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627919" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627919" data-parent_id="8627907" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627907" class="icon_comment-arrow-up js-comment_parent" data-id="8627919" data-parent_id="8627907" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627919" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627919" data-parent_id="8627907" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627919" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Хорошо, что получит finalHandler в следующем случае?<br>
<br>
doSomething().then(function () {<br>
 if (my_var == 2) {<br>
return doSomethingElse();<br>
} else {<br>
doSomethingElse();<br>
}<br>
 })<br>
 .then(finalHandler);</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8627919">  <li class="content-list__item content-list__item_comment js-comment " rel="8627925">
    
    <span class="parent_id" data-parent_id="8627919"></span>
    <div class="comment" id="comment_8627925">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8627925">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 21:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627925" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627925" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627925" data-parent_id="8627919" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627919" class="icon_comment-arrow-up js-comment_parent" data-id="8627925" data-parent_id="8627919" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627925" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627925" data-parent_id="8627919" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627925" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Либо результат работы doSomethingElse, либо undefined. Все зависит от переменной my_var.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8627925">  <li class="content-list__item content-list__item_comment js-comment " rel="8627931">
    
    <span class="parent_id" data-parent_id="8627925"></span>
    <div class="comment" id="comment_8627931">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627931">
          <a href="https://habr.com/ru/users/Blumfontein/" class="user-info user-info_inline" data-user-login="Blumfontein">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8d3a6783ce09078319648ef11ed197d9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Blumfontein</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 21:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627931" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627931" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627931" data-parent_id="8627925" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627925" class="icon_comment-arrow-up js-comment_parent" data-id="8627931" data-parent_id="8627925" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627931" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627931" data-parent_id="8627925" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627931" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А все, я понял, похоже затупил</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8627931"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8627975">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8627975">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627975">
          <a href="https://habr.com/ru/users/js605451/" class="user-info user-info_inline" data-user-login="js605451">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">js605451</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 22:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627975" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627975" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627975" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627975" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627975" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А кто расскажет:<br>
<blockquote>Вот вариант получше:<br>
<pre><code class="javascript hljs">remotedb.allDocs(...)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfPut</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.get(...);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfGet</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...);
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(err);
  });
</code></pre><br>
</blockquote><br>
как в этом замечательном примере:<br>
1. Добавить _разную_ обработку ошибок для localdb.put() и localdb.get()?<br>
2. Внутри третьего блока then получить доступ к resultOfAllDocs и resultOfPut?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8627975">  <li class="content-list__item content-list__item_comment js-comment " rel="8627991">
    
    <span class="parent_id" data-parent_id="8627975"></span>
    <div class="comment" id="comment_8627991">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8627991">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 22:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627991" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8627991" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8627991" data-parent_id="8627975" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627975" class="icon_comment-arrow-up js-comment_parent" data-id="8627991" data-parent_id="8627975" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627991" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8627991" data-parent_id="8627975" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8627991" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +5: ↑5 и ↓0">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendArgs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args1 = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.concat.call(args1, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>);
    }
}

remotedb.allDocs(...)
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...)
      .then(appendArgs(resultOfAllDocs), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*Обработка ошибки 1*/</span></span> })
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs, resultOfPut</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.get(...)
      .then(appendArgs(resultOfAllDocs, resultOfPut), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*Обработка ошибки 2*/</span></span> })
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs, resultOfPut, resultOfGet</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localdb.put(...)
      .then(appendArgs(resultOfAllDocs, resultOfPut, resultOfGet), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*Обработка ошибки 3*/</span></span> })
  })
  .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resultOfAllDocs, resultOfPut, resultOfGet, resultOfPut2</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-comment"><span class="hljs-comment">/* Какая-нибудь окончательная обработка результатов */</span></span>
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(err);
  });
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8627991"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628019">
    
    <span class="parent_id" data-parent_id="8627975"></span>
    <div class="comment" id="comment_8628019">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8628019">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 22:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628019" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628019" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628019" data-parent_id="8627975" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8627975" class="icon_comment-arrow-up js-comment_parent" data-id="8628019" data-parent_id="8627975" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628019" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628019" data-parent_id="8627975" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628019" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Еще вы можете использовать <a href="http://jsbin.com/vaciwar/edit?js,console">промежуточные catch()</a>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'some text'</span></span>)
  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">myText</span></span></span><span class="hljs-function"> =&gt;</span></span> {
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`My text is "</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${myText}</span></span></span><span class="hljs-string">"`</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'my error'</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'ololo'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Эта строка не выполнится</span></span>
  })
  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">errMessage</span></span></span><span class="hljs-function"> =&gt;</span></span> {
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`I caught an error "</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${errMessage}</span></span></span><span class="hljs-string">"`</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> errMessage;
  })
  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">someText</span></span></span><span class="hljs-function"> =&gt;</span></span> {
    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`The message is "</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${someText}</span></span></span><span class="hljs-string">"`</span></span>);
  });
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8628019"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628069">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8628069">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628069">
          <a href="https://habr.com/ru/users/justboris/" class="user-info user-info_inline" data-user-login="justboris">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">justboris</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">26 октября 2015 в 22:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628069" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628069" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628069" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628069" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628069" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В примере с продвинутой ошибкой №1 автор переусердствовал с Promise.resolve(). Непонятно, чем это<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">somePromiseAPI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    doSomethingThatMayThrow();
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'foo'</span></span>;
  }).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
}
</code></pre><br>
Лучше обычного конструктора Promise:<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">betterPromiseAPI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function">) </span></span>{
    doSomethingThatMayThrow();
    resolve(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>);
  }).then(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>);
}
</code></pre><br>
Exception в функции, переданной в new Promise также будет перехвачен и вызовет reject. Зато во втором варианте создается на один промис меньше.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8628069"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628191">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8628191">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628191">
          <a href="https://habr.com/ru/users/mr47/" class="user-info user-info_inline" data-user-login="mr47">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/c1a5afa178cc244f30ecdb403caca0b0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mr47</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 00:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628191" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628191" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628191" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628191" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628191" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –5: ↑0 и ↓5">–5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">Проблема в том что не многие понимают что async/await это не панацея и стоит понимать где его использовать.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">)=&gt;</span></span>{
         setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">=&gt;</span></span>{
              resolve(<span class="hljs-number"><span class="hljs-number">1</span></span>);
         },<span class="hljs-number"><span class="hljs-number">300</span></span>);
    })
}
<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
     <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> one  = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> save();
     <span class="hljs-comment"><span class="hljs-comment">// one = 1</span></span>
     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> one;
}
</code></pre><br>
<br>
<div class="spoiler"><b class="spoiler_title">И вот вопрос что же вернет функция test() ?</b><div class="spoiler_text"> Promise<br>
</div></div><br>
<br>
И это еще более странно, вот этот вот код не даст тот результат который вы думаете если будите использовать babel с asyncToGenerator (nodejs 4.2+).<br>
<br>
<div class="spoiler"><b class="spoiler_title">Кошмарный результат!</b><div class="spoiler_text"><pre><code class="javascript hljs">   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> one = test();
   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> two = <span class="hljs-number"><span class="hljs-number">2</span></span>;
   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> three = one + two;
   <span class="hljs-comment"><span class="hljs-comment">// 3 ?? - НЕА</span></span>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title">Точно хотите знать ?</b><div class="spoiler_text">[object Promise]2<br>
</div></div><br>
</div></div><br>
<br>
В чем соль подобного, <a href="https://tc39.github.io/ecmascript-asyncawait/">ссылка на стандарт </a> (Листать до синтаксического сахара за счет чего это сделано)<br>
<br>
<div class="spoiler"><b class="spoiler_title">А как решить такую ситуацию ?</b><div class="spoiler_text">Как не странно обернуть еще раз в async/await <br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> one = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> test();
   <span class="hljs-comment"><span class="hljs-comment">// one = 1</span></span>
   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> two = <span class="hljs-number"><span class="hljs-number">2</span></span>;
   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(one + two); <span class="hljs-comment"><span class="hljs-comment">// 3</span></span>
}
test2();
</code></pre><br>
</div></div><br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8628191">  <li class="content-list__item content-list__item_comment js-comment " rel="8628373">
    
    <span class="parent_id" data-parent_id="8628191"></span>
    <div class="comment" id="comment_8628373">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628373">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 06:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628373" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628373" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628373" data-parent_id="8628191" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628191" class="icon_comment-arrow-up js-comment_parent" data-id="8628373" data-parent_id="8628191" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628373" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628373" data-parent_id="8628191" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628373" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Любая асинхронная функция возвращает промис. Что в этом внезапного и неожиданного?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8628373"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628431">
    
    <span class="parent_id" data-parent_id="8628191"></span>
    <div class="comment" id="comment_8628431">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628431">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 08:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628431" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628431" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628431" data-parent_id="8628191" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628191" class="icon_comment-arrow-up js-comment_parent" data-id="8628431" data-parent_id="8628191" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628431" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628431" data-parent_id="8628191" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628431" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>А как решить такую ситуацию ?</blockquote><pre><code class="javascript hljs">test().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">one</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(one + <span class="hljs-number"><span class="hljs-number">2</span></span>));
</code></pre><br>
Ну или да, выполнять test через await в рамках другой async функции. <br>
Я не совсем понимаю ― а на что вы рассчитывали? На то, что метод test заблочит весь поток js-а, до тех пор, пока не выполнится?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8628431">  <li class="content-list__item content-list__item_comment js-comment " rel="8629125">
    
    <span class="parent_id" data-parent_id="8628431"></span>
    <div class="comment" id="comment_8629125">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629125">
          <a href="https://habr.com/ru/users/mr47/" class="user-info user-info_inline" data-user-login="mr47">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/c1a5afa178cc244f30ecdb403caca0b0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mr47</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 13:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629125" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629125" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629125" data-parent_id="8628431" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628431" class="icon_comment-arrow-up js-comment_parent" data-id="8629125" data-parent_id="8628431" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629125" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629125" data-parent_id="8628431" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629125" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я не совсем понимаю ― а на что вы рассчитывали? На то, что метод test заблочит весь поток js-а, до тех пор, пока не выполнится?</blockquote><br>
Конечно же нет, но представьте как это может быть воспринято человеком только начавшим уже с es7 (c babel), все показывают красивые примеры, не вдаваясь в подробности. И ссылка на сахар за счет чего это сделано дает понять что результат будет промис. </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8629125">  <li class="content-list__item content-list__item_comment js-comment " rel="8629271">
    
    <span class="parent_id" data-parent_id="8629125"></span>
    <div class="comment" id="comment_8629271">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629271">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 14:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629271" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629271" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629271" data-parent_id="8629125" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629125" class="icon_comment-arrow-up js-comment_parent" data-id="8629271" data-parent_id="8629125" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629271" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629271" data-parent_id="8629125" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629271" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну… Любой асинхронный код это дискомфорт, в той или иной мере. К тому, что нельзя будет магическим образом писать асинхронный код синхронно я был уже готов после генераторов. Одним из неприятных моментов является то, что javascript удобно использовать в функциональном стиле, но «контекст» async-а (или generator-а) теряется в анонимных методах. Т.е. вот так вот сделать нельзя:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">)
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> someAsyncMethod(el));
}
</code></pre><br>
Потому что await не будет работать внутри метода. Тоже самое и в генераторах (yield). Такие библиотеки как underscore, lodash и пр. располагают к использованию цепочек методов с callback-ами. Да даже нативные методы .map, .reduce, .some и пр. тут ставят нам грабли. <br>
<br>
Конечно, какие-то конструкции для удобства можно написать самому, к примеру, свою универсальную реализацию .map, которой и метод и async сгодится. Но, ИМХО, проще смириться, что за любую асинхронщину нужно платить удобством.<br>
<br>
Очень не люблю такие вот конструкции:<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, n = list.length; i &lt; n; ++i)
{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> el = list[i];
}
</code></pre><br>
Но «for-of» лишит меня ключа, а .each yield (async) контекста. Что ж поделать… В любом случае это гораздо удобнее, чем callback-ый ад.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8629271">  <li class="content-list__item content-list__item_comment js-comment " rel="8631095">
    
    <span class="parent_id" data-parent_id="8629271"></span>
    <div class="comment" id="comment_8631095">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631095">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 12:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631095" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631095" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631095" data-parent_id="8629271" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629271" class="icon_comment-arrow-up js-comment_parent" data-id="8631095" data-parent_id="8629271" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631095" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631095" data-parent_id="8629271" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631095" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А зачем писать свою реализацию .map() и прочих? Что мы хотим получить на выходе вот этой функции из примера?<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> someAsyncMethod(el));
}
</code></pre><br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8631095">  <li class="content-list__item content-list__item_comment js-comment " rel="8631187">
    
    <span class="parent_id" data-parent_id="8631095"></span>
    <div class="comment" id="comment_8631187">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631187">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631187" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631187" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631187" data-parent_id="8631095" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631095" class="icon_comment-arrow-up js-comment_parent" data-id="8631187" data-parent_id="8631095" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631187" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631187" data-parent_id="8631095" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631187" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">маленькое но — в вашем примере map будет синхронным и будет дожидаться выполнения someAsyncMethod на каждой итерации.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8631187">  <li class="content-list__item content-list__item_comment js-comment " rel="8631235">
    
    <span class="parent_id" data-parent_id="8631187"></span>
    <div class="comment" id="comment_8631235">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631235">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631235" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631235" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631235" data-parent_id="8631187" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631187" class="icon_comment-arrow-up js-comment_parent" data-id="8631235" data-parent_id="8631187" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631235" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631235" data-parent_id="8631187" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631235" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вот и мне интересно, что мы ожидаем получить из подобного рода конструкции, даже если бы она работала. Даже если ее переписать, чтобы она не использовала arrow-функцию и использовала async, что будет работать технически, то мы в итоге все равно получаем массив промисов, как если бы вообще не использовали await в коде выше.<br>
<br>
Я понимаю, что товарищ  <a href="http://habrahabr.ru/users/faiwer/" class="user_link">faiwer</a> говорил про «контекст», и ведь вроде как в стрелочных функциях тот же «this», что и за ее пределами, так почему бы не передавать и «async» — но это другое. Как по мне — несмотря на необходимость явно отмечать функции как «async» — код получается с виду очень даже синхронным (но на практике надо понимать, конечно, во что он разворачивается).</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8631235">  <li class="content-list__item content-list__item_comment js-comment " rel="8631253">
    
    <span class="parent_id" data-parent_id="8631235"></span>
    <div class="comment" id="comment_8631253">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631253">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631253" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631253" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631253" data-parent_id="8631235" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631235" class="icon_comment-arrow-up js-comment_parent" data-id="8631253" data-parent_id="8631235" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631253" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631253" data-parent_id="8631235" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631253" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Даже если ее переписать, чтобы она не использовала arrow-функцию и использовала async, что будет работать технически, то мы в итоге все равно получаем <b>массив промисов</b>, как если бы вообще не использовали await в коде выше.</blockquote><br>
Гхм. Почему «массив промисов» а не массив результатов работы промисов?<br>
<br>
<blockquote>Я понимаю, что товарищ faiwer говорил про «контекст», и ведь вроде как в стрелочных функциях тот же «this», что и за ее пределами</blockquote><br>
Прошу прощения, что запутал вас. Я вовсе не имел ввиду ни this, ни scope. Слово «контекст» я использовал в более широком значении. Имею ввиду то, что доступные возможности в рамках «тела» обычного function-а, generator-а и async function-а разные. В первом случае мы не можем применять ни await, ни yield; во втором только yield; а в третьем только await; Каждая стрелочная или обычная анонимная функция такой «контекст» прекращает, руководствуясь уже возможностями обычных функций. А так как async-функции и generator-ы это, по большому счёту, вообще не функции, то применять их в качестве обычных callback-ов мы не можем. <br>
<br>
Надеюсь теперь стало яснее, что я имею ввиду :)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631253">  <li class="content-list__item content-list__item_comment js-comment " rel="8631311">
    
    <span class="parent_id" data-parent_id="8631253"></span>
    <div class="comment" id="comment_8631311">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631311">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631311" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631311" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631311" data-parent_id="8631253" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631253" class="icon_comment-arrow-up js-comment_parent" data-id="8631311" data-parent_id="8631253" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631311" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631311" data-parent_id="8631253" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631311" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, тут как ни пиши, результат работы самой async функции будет промисом, а .map() — синхронный. В случае<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = list.map(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> someAsyncMethod(el);
  });
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result);
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
}
</code></pre><br>
в консоль выводятся объекты промисов, а в случае<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span>* list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> someAsyncMethod(el));
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result);
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
}
</code></pre><br>
результаты работы промисов.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8631311">  <li class="content-list__item content-list__item_comment js-comment " rel="8631325">
    
    <span class="parent_id" data-parent_id="8631311"></span>
    <div class="comment" id="comment_8631325">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631325">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631325" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631325" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631325" data-parent_id="8631311" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631311" class="icon_comment-arrow-up js-comment_parent" data-id="8631325" data-parent_id="8631311" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631325" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631325" data-parent_id="8631311" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631325" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">теперь понял вас. Логично, что затолкав в .map async-и мы получим промисы :) Но я имел ввиду что-то похожее на вот это:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> list.asyncMap(someAsyncMethod);</code></pre><br>
Где asyncMap сам async-метод, который await-ми переберёт list someAsyncMethod-ом.<br>
<br>
Но даже написав свой .asyncMap мы толком ничего не выиграем. Потому, что для того чтобы цепочка из вот таких вот async-монстро-функций заработала, придётся изрядно по… возиться. И всё равно получится что попало.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8631325">  <li class="content-list__item content-list__item_comment js-comment " rel="8631383">
    
    <span class="parent_id" data-parent_id="8631325"></span>
    <div class="comment" id="comment_8631383">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631383">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631383" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631383" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631383" data-parent_id="8631325" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631325" class="icon_comment-arrow-up js-comment_parent" data-id="8631383" data-parent_id="8631325" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631383" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631383" data-parent_id="8631325" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631383" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, в точности, как синхронно, конечно, не будет. Но с «await*», который, как говорят ниже, убрали из спека и с Promise.all получаем вполне работающий синхронный .map, но оперировать все равно придется промисами — впрочем, это в любом случае. .asyncMap вполне несложно реализовать, использовав внутри .map и Promise.all — так что тут я особой монструозности то и не вижу. Единственное — всегда нужно держать в голове, что там происходит за кулисами.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_8631383">  <li class="content-list__item content-list__item_comment js-comment " rel="8631417">
    
    <span class="parent_id" data-parent_id="8631383"></span>
    <div class="comment" id="comment_8631417">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631417">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631417" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631417" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631417" data-parent_id="8631383" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631383" class="icon_comment-arrow-up js-comment_parent" data-id="8631417" data-parent_id="8631383" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631417" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631417" data-parent_id="8631383" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631417" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>так что тут я особой <b>монструозности</b> то и не вижу</blockquote><br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> list.asyncMap(fn1)
       .asyncFilter(fn2)
       .reduce(fn3)
       .some(fn4);
</code></pre><br>
А так? :) </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_8631417">  <li class="content-list__item content-list__item_comment js-comment " rel="8631447">
    
    <span class="parent_id" data-parent_id="8631417"></span>
    <div class="comment" id="comment_8631447">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631447">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631447" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631447" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631447" data-parent_id="8631417" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631417" class="icon_comment-arrow-up js-comment_parent" data-id="8631447" data-parent_id="8631417" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631447" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631447" data-parent_id="8631417" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631447" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Чем-то жертвовать придется :)<br>
<br>
Если filter тоже должен быть асинхронным — то сложнее, но если мы после .asyncMap работаем чисто с результатами промисов — то можно использовать синхронно все остальное.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> list.asyncMap(fn1);
<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items
       .filter(fn2)
       .reduce(fn3)
       .some(fn4);
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_8631447">  <li class="content-list__item content-list__item_comment js-comment " rel="8631451">
    
    <span class="parent_id" data-parent_id="8631447"></span>
    <div class="comment" id="comment_8631451">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631451">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631451" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631451" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631451" data-parent_id="8631447" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631447" class="icon_comment-arrow-up js-comment_parent" data-id="8631451" data-parent_id="8631447" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631451" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631451" data-parent_id="8631447" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631451" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Чем-то жертвовать придется :)</blockquote>Ага. Собственно об этом я и говорю. Так то да, await, async, yield это куда лучше, чем calback-hell или promise-hell :)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_8631451"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631237">
    
    <span class="parent_id" data-parent_id="8631187"></span>
    <div class="comment" id="comment_8631237">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631237">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631237" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631237" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631237" data-parent_id="8631187" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631187" class="icon_comment-arrow-up js-comment_parent" data-id="8631237" data-parent_id="8631187" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631237" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631237" data-parent_id="8631187" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631237" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну собственно именно такое поведение и ожидается. Но на самом деле будет syntax error. Потому что await работает только в контексте async-function, а стрелочные функции — async-ами не являются. </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8631237"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631233">
    
    <span class="parent_id" data-parent_id="8631095"></span>
    <div class="comment" id="comment_8631233">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631233">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631233" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631233" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631233" data-parent_id="8631095" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631095" class="icon_comment-arrow-up js-comment_parent" data-id="8631233" data-parent_id="8631095" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631233" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631233" data-parent_id="8631095" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631233" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>А зачем писать свою реализацию .map() и прочих? Что мы хотим получить на выходе вот этой функции из примера?</blockquote><br>
Ну функция в примере сделала бы следующее (на самом деле будет syntax error):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">)
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = [];
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> el <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> list)
  {
    result.push(<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> someAsyncMethod(el));
  }
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
}
</code></pre><br>
Что делает someAsyncMethod не важно. Важно что он возвращает что-либо полученное асинхронно. В примере выше код стал более громоздким и менее читаемым. Функциональный подход часто бывает более наглядным. <br>
<br>
Но пока у нас 1 map, нам по большому счёту плевать. А что если у нас типовая lodash цепочка методов? К примеру из 8 последовательных chain-вызовов? Придётся забить на lodash цепочку и написать всё в обычном стиле, через for-ы, if-ы и пр… А это, зачастую, бывает очень неудобным, в особенности после того как подсел на функциональный подход.<br>
<br>
Т.е. получается что async-и и generator-ы НЕ позволяют писать асинхронный код также удобно, как и синхронный. И дело не только в том, что при более менее сложной логике async-и придётся плодить везде (что местами создаст определённые неудобства, потребует обёрток и пр. шаманств). А в том, что ограничения куда шире. <br>
<br>
Но в любом случае, через async-ки и generator-ы писать сложный асинхронный гораздо удобнее.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8631233">  <li class="content-list__item content-list__item_comment js-comment " rel="8631259">
    
    <span class="parent_id" data-parent_id="8631233"></span>
    <div class="comment" id="comment_8631259">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631259">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631259" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631259" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631259" data-parent_id="8631233" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631233" class="icon_comment-arrow-up js-comment_parent" data-id="8631259" data-parent_id="8631233" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631259" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631259" data-parent_id="8631233" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631259" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как по мне — вполне нормально можно сделать и с async/await:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span>* list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> someAsyncMethod(el));
}
</code></pre><br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8631259">  <li class="content-list__item content-list__item_comment js-comment " rel="8631277">
    
    <span class="parent_id" data-parent_id="8631259"></span>
    <div class="comment" id="comment_8631277">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631277">
          <a href="https://habr.com/ru/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631277" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631277" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631277" data-parent_id="8631259" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631259" class="icon_comment-arrow-up js-comment_parent" data-id="8631277" data-parent_id="8631259" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631277" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631277" data-parent_id="8631259" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631277" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><code>await*</code> давно удалён из предложения и, например, в babel 6 будет выпилен. Замените на <code>Promise.all</code>.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631277">  <li class="content-list__item content-list__item_comment js-comment " rel="8631389">
    
    <span class="parent_id" data-parent_id="8631277"></span>
    <div class="comment" id="comment_8631389">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631389">
          <a href="https://habr.com/ru/users/VasilioRuzanni/" class="user-info user-info_inline" data-user-login="VasilioRuzanni">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/8e4a37195b710e6021ea84a7ae49e85a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">VasilioRuzanni</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631389" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631389" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631389" data-parent_id="8631277" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631277" class="icon_comment-arrow-up js-comment_parent" data-id="8631389" data-parent_id="8631277" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631389" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631389" data-parent_id="8631277" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631389" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А есть где-то информация почему так? Все-таки Promise.all — это дополнительный шум в коде. Как-то я упустил этот момент с удалением «await*».</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8631389">  <li class="content-list__item content-list__item_comment js-comment " rel="8631457">
    
    <span class="parent_id" data-parent_id="8631389"></span>
    <div class="comment" id="comment_8631457">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631457">
          <a href="https://habr.com/ru/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631457" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631457" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631457" data-parent_id="8631389" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631389" class="icon_comment-arrow-up js-comment_parent" data-id="8631457" data-parent_id="8631389" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631457" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631457" data-parent_id="8631389" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631457" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну я какбэ <a href="https://github.com/tc39/ecmascript-asyncawait/issues/61#issuecomment-137807577">тоже не в восторге</a>, <a href="https://github.com/rwaldron/tc39-notes/blob/244797871dfa8fd475fd593821605fee14d2cb05/es7/2015-07/july-30.md#64-advance-async-functions-to-stage-2">из обсуждения комитетом</a>, можете поискать ещё информации в ишьюшках.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8631457"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631509">
    
    <span class="parent_id" data-parent_id="8631389"></span>
    <div class="comment" id="comment_8631509">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631509">
          <a href="https://habr.com/ru/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631509" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631509" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631509" data-parent_id="8631389" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631389" class="icon_comment-arrow-up js-comment_parent" data-id="8631509" data-parent_id="8631389" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631509" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631509" data-parent_id="8631389" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631509" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Кстати, асинхронные стрелки тоже могут быть удалены (хотя, думаю, маловероятно) <twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="655556764042002432"></twitter-widget>
<script async="" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/widgets.js.Без названия" charset="utf-8"></script></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8631509"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631283">
    
    <span class="parent_id" data-parent_id="8631259"></span>
    <div class="comment" id="comment_8631283">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631283">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631283" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631283" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631283" data-parent_id="8631259" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631259" class="icon_comment-arrow-up js-comment_parent" data-id="8631283" data-parent_id="8631259" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631283" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631283" data-parent_id="8631259" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631283" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Пока код состоит из одной строки — да.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631283"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631339">
    
    <span class="parent_id" data-parent_id="8631233"></span>
    <div class="comment" id="comment_8631339">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631339">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631339" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631339" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631339" data-parent_id="8631233" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631233" class="icon_comment-arrow-up js-comment_parent" data-id="8631339" data-parent_id="8631233" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631339" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631339" data-parent_id="8631233" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631339" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ещё небольшой пример. Наверняка многие уже взяли за привычку использовать .forEach или _.each, для перебора массивов. Это удобнее, чем for-of потому, что мы не теряем индексы. В случае async-метода приходится использовать <br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, n = list.length; i &lt; n; ++ i)
{
  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> el = list[i];
  <span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
}</code></pre><br>
<br>
Правда тут есть 1 решение. Дождаться пока node (я не использую babel) сможет вот так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> [el, i] <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> iter(list))</code></pre><br>
Где iter будет костылём, который позволит перебирать массив массив на манер Map-а.<br>
<br>
Честно говоря, я не слежу за ES6-7. В Array случаем уже не добавили возможность перебора for-of-м без потери индексов?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8631339">  <li class="content-list__item content-list__item_comment js-comment " rel="8631359">
    
    <span class="parent_id" data-parent_id="8631339"></span>
    <div class="comment" id="comment_8631359">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631359">
          <a href="https://habr.com/ru/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631359" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631359" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631359" data-parent_id="8631339" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631339" class="icon_comment-arrow-up js-comment_parent" data-id="8631359" data-parent_id="8631339" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631359" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631359" data-parent_id="8631339" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631359" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span>].entries())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key, val);
</code></pre><br>
давно часть ES6 и никакие индексы не теряются. Ну а то, что V8 пока не поддерживает деструкцию — его проблемы — никто не мешает использовать транспайлер.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631359">  <li class="content-list__item content-list__item_comment js-comment " rel="8631371">
    
    <span class="parent_id" data-parent_id="8631359"></span>
    <div class="comment" id="comment_8631371">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631371">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631371" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631371" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631371" data-parent_id="8631359" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631359" class="icon_comment-arrow-up js-comment_parent" data-id="8631371" data-parent_id="8631359" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631371" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631371" data-parent_id="8631359" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631371" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо. Возьму на заметку.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8631371"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631415">
    
    <span class="parent_id" data-parent_id="8631339"></span>
    <div class="comment" id="comment_8631415">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631415">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631415" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631415" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631415" data-parent_id="8631339" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631339" class="icon_comment-arrow-up js-comment_parent" data-id="8631415" data-parent_id="8631339" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631415" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631415" data-parent_id="8631339" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631415" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">.forEach или _.each прекрасно заменяются на map. А что делать с map — мы уже знаем.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631415"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631251">
    
    <span class="parent_id" data-parent_id="8629271"></span>
    <div class="comment" id="comment_8631251">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631251">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631251" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631251" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631251" data-parent_id="8629271" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629271" class="icon_comment-arrow-up js-comment_parent" data-id="8631251" data-parent_id="8629271" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631251" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631251" data-parent_id="8629271" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631251" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">)
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> someAsyncMethod(el)));
}
</code></pre><br>
<br>
Ну или если нужен обязательно асинхронный код, то так:<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">)
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(list.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> someAsyncMethod(el)));
}
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8631251">  <li class="content-list__item content-list__item_comment js-comment " rel="8631267">
    
    <span class="parent_id" data-parent_id="8631251"></span>
    <div class="comment" id="comment_8631267">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631267">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 13:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631267" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631267" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631267" data-parent_id="8631251" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631251" class="icon_comment-arrow-up js-comment_parent" data-id="8631267" data-parent_id="8631251" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631267" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631267" data-parent_id="8631251" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631267" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="http://habrahabr.ru/users/mayorov/" class="user_link">mayorov</a> <i>невероятно, оказывается существует Promise.all. Фантастика. Это всё меняет.</i><br>
<br>
Прошу читать мои комментарии не по диагонали. Что вы будете делать в случае underscore, lodash или какой-бы то ни было ещё цепочке, основанной не на промисах? Если у вас каррирования, монады или ещё что-нибудь в таком духе?<br>
<br>
Скорее всего забьёте и перепишите на не-функциональный подход. О чём я и говорю.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8631267">  <li class="content-list__item content-list__item_comment js-comment " rel="8631405">
    
    <span class="parent_id" data-parent_id="8631267"></span>
    <div class="comment" id="comment_8631405">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631405">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 14:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631405" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631405" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631405" data-parent_id="8631267" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631267" class="icon_comment-arrow-up js-comment_parent" data-id="8631405" data-parent_id="8631267" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631405" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631405" data-parent_id="8631267" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631405" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А какие еще функции имеют смысл в асинхронном варианте? Просмотрел список функций того же lodash — и не нашел куда бы я мог передать лямбду, возвращающую промис кроме как в map.<br>
<br>
А что делать с map я уже писал.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8631405">  <li class="content-list__item content-list__item_comment js-comment " rel="8631433">
    
    <span class="parent_id" data-parent_id="8631405"></span>
    <div class="comment" id="comment_8631433">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631433">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631433" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631433" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631433" data-parent_id="8631405" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631405" class="icon_comment-arrow-up js-comment_parent" data-id="8631433" data-parent_id="8631405" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631433" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631433" data-parent_id="8631405" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631433" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">UPD: ах да, filter, как я мог забыть. Для него я напишу свою реализацию. Один раз.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631433">  <li class="content-list__item content-list__item_comment js-comment " rel="8631445">
    
    <span class="parent_id" data-parent_id="8631433"></span>
    <div class="comment" id="comment_8631445">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631445">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631445" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631445" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631445" data-parent_id="8631433" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631433" class="icon_comment-arrow-up js-comment_parent" data-id="8631445" data-parent_id="8631433" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631445" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631445" data-parent_id="8631433" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631445" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В идеале как то так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> list
      .filter(fn1)
      .map(fn2)
      <span class="hljs-comment"><span class="hljs-comment">//</span></span>
      .invoke(fn3)
      .reduce(fn4)
      .groupBy(fn5)
      .map(fn6)
      .value();
</code></pre><br>
Получится весьма не тривиально :) Хотя да, более, чем подъёмно.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8631445"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631437">
    
    <span class="parent_id" data-parent_id="8631405"></span>
    <div class="comment" id="comment_8631437">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631437">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 15:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631437" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631437" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631437" data-parent_id="8631405" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631405" class="icon_comment-arrow-up js-comment_parent" data-id="8631437" data-parent_id="8631405" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631437" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631437" data-parent_id="8631405" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631437" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>А какие еще функции имеют смысл в асинхронном варианте?</blockquote>Любые из тех, что принимают callback-и. А это половина библиотеки. Из самых часто используемых: .flatten (либо .flatMap), .reduce, .filter, .transform, .each. К примеру, в .filter может потребоваться некая проверка значения memcahed по ключу.<br>
<br>
К тому же стоит учесть, что очень часто они применяются в цепочке, а не раздельно друг от друга.<br>
<br>
А ещё вы ошибаетесь приравнивания .map, .each и Promise.all. Как минимум некоторые реализации .each-а умеют break-ать при return false. </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8631437"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628331">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8628331">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628331">
          <a href="https://habr.com/ru/users/elser/" class="user-info user-info_inline" data-user-login="elser">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/2d7cb9ff7261dd9581301d6813dc3e22.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">elser</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 03:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628331" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628331" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628331" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628331" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628331" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>сделайте то, что JavaScript разработчики делали испокон веков — создайте функцию и используйте ее по имени</blockquote><br>
вот, золотые слова.<br>
Да, не спорю, промисы — это красиво и автор абсолютно прав, что думать о них, как о серебряной пуле для борьбы с callback hell не совсем верно, так как по сути, от пирамиды зла можно избавиться именно так, как сказано в этой фразе — без специальных конструкций и библиотек для работы с асинхронной логикой.<br>
<br>
на пример вот это:<br>
<pre><code class="javascript hljs">doAsync1(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  doAsync2(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    doAsync3(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
      doAsync4(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
         <span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
      })
    })
  })
})
</code></pre><br>
можно и так сделать плоским:<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> callbacks = {
  <span class="hljs-attr"><span class="hljs-attr">async1CallBack</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    doAsync2(callbacks.async2CallBack);
  },
  <span class="hljs-attr"><span class="hljs-attr">async2CallBack</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    doAsync3(callbacks.async3CallBack);
  },
  <span class="hljs-attr"><span class="hljs-attr">async3CallBack</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    doAsync4(callbacks.async4CallBack);
  },
  <span class="hljs-attr"><span class="hljs-attr">async4CallBack</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
  }
}
doAsync1(callbacks.async1CallBack);
</code></pre><br>
И если кому то описанные автором довольно тонкие нюансы использования промисов кажутся сложными, то просто используйте это правило — не используйте в качестве колбеков анонимные функции, а объявляйте их до использования в асинхронной функции. Этот способ прост, нагляден и не требует никаких дополнительных библиотек, но с другой стороны, с чем тоже трудно поспорить:<br>
<blockquote>логика приложения начинает приобретать вид, приносящий эстетическое удовольствие:<br>
</blockquote><br>
<pre><code class="javascript hljs">doAsync1()
  .then(doAsync2)
  .then(doAsync3)
  .then(doAsync4);
</code></pre><br>
<blockquote>Вот для чего нам промисы.<br>
</blockquote></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8628331"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628895">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8628895">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628895">
          <a href="https://habr.com/ru/users/BoltThrower/" class="user-info user-info_inline" data-user-login="BoltThrower">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BoltThrower</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 11:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628895" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628895" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628895" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628895" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628895" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –5: ↑2 и ↓7">–5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">97 употреблений «промисов» в статье, давно меня так не корёжило. Не имел дела с яваскриптом, там что, правда прижился такой термин?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8628895">  <li class="content-list__item content-list__item_comment js-comment " rel="8628917">
    
    <span class="parent_id" data-parent_id="8628895"></span>
    <div class="comment" id="comment_8628917">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628917">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628917" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628917" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628917" data-parent_id="8628895" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628895" class="icon_comment-arrow-up js-comment_parent" data-id="8628917" data-parent_id="8628895" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628917" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628917" data-parent_id="8628895" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628917" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="http://martinfowler.com/bliki/JavascriptPromise.html">martinfowler.com/bliki/JavascriptPromise.html</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8628917">  <li class="content-list__item content-list__item_comment js-comment " rel="8628969">
    
    <span class="parent_id" data-parent_id="8628917"></span>
    <div class="comment" id="comment_8628969">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628969">
          <a href="https://habr.com/ru/users/BoltThrower/" class="user-info user-info_inline" data-user-login="BoltThrower">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BoltThrower</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628969" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628969" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628969" data-parent_id="8628917" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628917" class="icon_comment-arrow-up js-comment_parent" data-id="8628969" data-parent_id="8628917" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628969" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628969" data-parent_id="8628917" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628969" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –3: ↑2 и ↓5">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3">Нет, я не сомневаюсь, что в яваскрипте есть нечто, по-английски называемое «promise», но в статье-«переводе» употреблять такую кальку как-то уж совсем неприлично. Это перевод с латиницы на кириллицу, а не с английского на русский.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8628969">  <li class="content-list__item content-list__item_comment js-comment " rel="8628975">
    
    <span class="parent_id" data-parent_id="8628969"></span>
    <div class="comment" id="comment_8628975">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8628975">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628975" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628975" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628975" data-parent_id="8628969" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628969" class="icon_comment-arrow-up js-comment_parent" data-id="8628975" data-parent_id="8628969" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628975" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628975" data-parent_id="8628969" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628975" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">«обещание» не очень хорошо звучит, отложенные объекы — лучше конечно но это чуть чуть другое.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8628975">  <li class="content-list__item content-list__item_comment js-comment " rel="8629015">
    
    <span class="parent_id" data-parent_id="8628975"></span>
    <div class="comment" id="comment_8629015">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629015">
          <a href="https://habr.com/ru/users/BoltThrower/" class="user-info user-info_inline" data-user-login="BoltThrower">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BoltThrower</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629015" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629015" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629015" data-parent_id="8628975" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628975" class="icon_comment-arrow-up js-comment_parent" data-id="8629015" data-parent_id="8628975" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629015" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629015" data-parent_id="8628975" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629015" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну англоязычные пользователи используют же как-то «обещания», а не какие-нибудь obeschaniya, а у нас почему-то любят оперировать терминами, вместо того чтобы оперировать смыслами.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8629015"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8629281">
    
    <span class="parent_id" data-parent_id="8628975"></span>
    <div class="comment" id="comment_8629281">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629281">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 14:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629281" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629281" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629281" data-parent_id="8628975" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628975" class="icon_comment-arrow-up js-comment_parent" data-id="8629281" data-parent_id="8628975" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629281" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629281" data-parent_id="8628975" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629281" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>«обещание» не очень хорошо звучит, отложенные объекы — лучше конечно но это чуть чуть другое.</blockquote>Многократно встречал в сети promise-ы именно как «обещания». Можно сказать — уже привык к такому термину. Слух не корёжит. ИМХО, термин вполне подходящий.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8629281">  <li class="content-list__item content-list__item_comment js-comment " rel="8689689">
    
    <span class="parent_id" data-parent_id="8629281"></span>
    <div class="comment" id="comment_8689689">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8689689">
          <a href="https://habr.com/ru/users/elser/" class="user-info user-info_inline" data-user-login="elser">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/2d7cb9ff7261dd9581301d6813dc3e22.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">elser</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 декабря 2015 в 15:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8689689" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8689689" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8689689" data-parent_id="8629281" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629281" class="icon_comment-arrow-up js-comment_parent" data-id="8689689" data-parent_id="8629281" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8689689" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8689689" data-parent_id="8629281" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8689689" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Знаете, что самое интересное — критики терминологии сами её при этом прекрасно понимают ))))</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8689689"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8628971">
    
    <span class="parent_id" data-parent_id="8628895"></span>
    <div class="comment" id="comment_8628971">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8628971">
          <a href="https://habr.com/ru/users/drfisher/" class="user-info user-info_inline" data-user-login="drfisher">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f85a4db9139d1346b03759d28a08ba98(1).jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">drfisher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628971" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8628971" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8628971" data-parent_id="8628895" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628895" class="icon_comment-arrow-up js-comment_parent" data-id="8628971" data-parent_id="8628895" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8628971" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8628971" data-parent_id="8628895" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8628971" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, термин прижился именно так.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8628971"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8629029">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8629029">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629029">
          <a href="https://habr.com/ru/users/interist32/" class="user-info user-info_inline" data-user-login="interist32">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/ec645fad0ae95ebcb648aa5336714395.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">interist32</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 12:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629029" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629029" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629029" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629029" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629029" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Отличный перевод. Автору большое спасибо. Несколько раз порывался прочесть данную статью в оригинале и откладывал на потом. Сейчас прочел на одном дыхании. Проблема, к сожалению, как мне кажется в том, что программисты, особенно начинающие, не читают спецификаций, а основываются на Stackoverflow-советах и примерах. Есть отличная серия докладов Domenic Denicola про промисы. Всем советую.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8629029"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8629081">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8629081">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629081">
          <a href="https://habr.com/ru/users/fetis26/" class="user-info user-info_inline" data-user-login="fetis26">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/9f9a0015844fa06cba1be7728ebc46ea.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">fetis26</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 13:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629081" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629081" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629081" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629081" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629081" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Читал ее в оригинал. Отлично что сделали перевод на русский. Статься шикарная.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8629081"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8629151">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8629151">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629151">
          <a href="https://habr.com/ru/users/fetis26/" class="user-info user-info_inline" data-user-login="fetis26">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/9f9a0015844fa06cba1be7728ebc46ea.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">fetis26</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 13:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629151" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629151" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629151" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629151" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629151" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">И такой вот вопрос у меня вчера возник<br>
<br>
Правильно ли я понимаю, что если один из промисов в цепочке сделал reject, то вся цепочка прерывается и никакого значения наружу из обработчика reject мы не вернем. У меня была задача в случае reject одного промиса, вернуть другой.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8629151">  <li class="content-list__item content-list__item_comment js-comment " rel="8629207">
    
    <span class="parent_id" data-parent_id="8629151"></span>
    <div class="comment" id="comment_8629207">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8629207">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 октября 2015 в 13:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629207" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8629207" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8629207" data-parent_id="8629151" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629151" class="icon_comment-arrow-up js-comment_parent" data-id="8629207" data-parent_id="8629151" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8629207" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8629207" data-parent_id="8629151" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8629207" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Для этих целей и существует catch. Он тоже может возвращать результат или даже промис.<br>
<br>
(Только осторожнее с JQuery — в 1 и 2й версиях там catch работает по-другому)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8629207"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8630535">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8630535">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8630535">
          <a href="https://habr.com/ru/users/sompylasar/" class="user-info user-info_inline" data-user-login="sompylasar">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/ab97cb572a3ea9484f9a27629b58784a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">sompylasar</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 00:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630535" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8630535" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630535" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8630535" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8630535" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Перевод отличный!<br>
<br>
Тем, кто пользуется jQuery.Deferred, необходимо помнить, что он не следует <a href="https://promisesaplus.com/#point-34">пункту 2.2.4 спецификации Promises/A+</a>: функции выполняются по возможности синхронно, в текущем стеке выполнения, и <a href="https://github.com/kriskowal/q/wiki/Coming-from-jQuery#exception-handling">throw внутри функций, переданных в then, не приводят к reject, а прерывают текущий стек выполнения</a>, то есть в зависимости от последовательности развития событий callback'и могут вызываться как асинхронно, так и синхронно, что очень опасно — асинхронные функции могут внезапно стать синхронными.<br>
<br>
<a href="http://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/">Здесь</a> хорошо описана разница между синхронными и асинхронными callback'ами, и делается упор на то, что, предоставляя интерфейс с callback'ами, необходимо делать их либо всегда синхронными, либо всегда асинхронными, но не смешивать.<br>
<br>
С другими реализациями, которые следуют всем требованиям Promises/A+, promise поменяет свое состояние только после завершения всех выполняющихся функций, то есть стек при смене состояния promise и вызове callback'ов всегда будет «пустой» (содержать только вызовы функций «платформы» и не содержать вызовов функций приложения).<br>
<br>
Например,<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomethingPromised</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> def = jQuery.Deferred();

    def.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>();
    });

    def.resolve();
    <span class="hljs-comment"><span class="hljs-comment">//&lt; Выкинет Error отсюда, прерывая выполнение функции getSomethingPromised</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// и всех вызвавших её функций -- функция getSomethingPromised предстала как синхронная.</span></span>

    doSomething(); <span class="hljs-comment"><span class="hljs-comment">//&lt; Не выполнится!</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> def.promise();
}
</code></pre><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomethingPromised</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> def = jQuery.Deferred();

    def.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>();
    });

    setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
        def.resolve(); <span class="hljs-comment"><span class="hljs-comment">//&lt; Выкинет Error отсюда, прерывая выполнение только функции, обрабатывающей таймер.</span></span>
    }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);

    doSomething(); <span class="hljs-comment"><span class="hljs-comment">//&lt; Выполнится!</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> def.promise(); <span class="hljs-comment"><span class="hljs-comment">//&lt; Вернет promise в вызывающую функцию  -- функция getSomethingPromised предстала как асинхронная.</span></span>
}
</code></pre><br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8630535">  <li class="content-list__item content-list__item_comment js-comment " rel="8630803">
    
    <span class="parent_id" data-parent_id="8630535"></span>
    <div class="comment" id="comment_8630803">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8630803">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 09:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630803" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8630803" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8630803" data-parent_id="8630535" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630535" class="icon_comment-arrow-up js-comment_parent" data-id="8630803" data-parent_id="8630535" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630803" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8630803" data-parent_id="8630535" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8630803" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Не вижу проблем со смешиванием синхронных и асинхронных обратных вызовов — если помнить про такую возможность, проблем не будет. Вот тот факт, что исключения нигде к коде jquery не ловятся — это и правда проблема.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8630803">  <li class="content-list__item content-list__item_comment js-comment " rel="8632089">
    
    <span class="parent_id" data-parent_id="8630803"></span>
    <div class="comment" id="comment_8632089">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632089">
          <a href="https://habr.com/ru/users/sompylasar/" class="user-info user-info_inline" data-user-login="sompylasar">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/ab97cb572a3ea9484f9a27629b58784a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">sompylasar</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 23:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632089" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632089" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632089" data-parent_id="8630803" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8630803" class="icon_comment-arrow-up js-comment_parent" data-id="8632089" data-parent_id="8630803" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632089" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632089" data-parent_id="8630803" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632089" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Плохо смешение синхронного и асинхронного вызовов одного и того же callback'а. Внешний код, передающий коду асинхронной природы функцию для обратного вызова, конечно, может ожидать от такого кода любого документированного поведения, но будет лучше, если это поведение будет (более) предсказуемым (асинхронным).<br>
<br>
Например, передавая функцию в Array forEach, sort или map, я точно знаю, что моя функция будет вызвана только синхронно в процессе выполнения этих функций, и не будет больше вызываться после их завершения.<br>
<br>
Той же предсказуемости хотелось бы и от функций асинхронной природы (например, реализующих сетевые запросы). В jQuery гарантия асинхронного вызова callback-функций, переданных в функции асинхронной природы или подвешенных на promise, не предоставляется, что приводит к необходимости в вызывающем коде предполагать оба варианта вызова переданных функций. Это требует от разработчика большего опыта и понимания происходящего, следовательно, повышается вероятность допустить ошибку, не обработав синхронный вариант вызова callback'ов.<br>
<br>
Особенно подвержен ошибкам код, который меняет состояние объектов, перемежая изменения навешиванием обработчиков promise'ов. В случае синхронного вызова callback'ов из promise'ов, в зависимости от состояния primose'ов эти callback'и будут вызваны либо асинхронно, либо сразу при навешивании, и код внутри callback'ов может при некотором стечении обстоятельств получить управление раньше, чем изменение состояния объекта завершится.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8632089"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631867">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8631867">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631867">
          <a href="https://habr.com/ru/users/slavent77/" class="user-info user-info_inline" data-user-login="slavent77">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">slavent77</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 19:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631867" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631867" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631867" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631867" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631867" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Очень полезная статья. Всегда, когда использовал Deferred, было ощущение, что это какой-то костыль.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8631867"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631899">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8631899">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631899">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 19:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631899" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631899" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631899" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631899" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631899" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑2 и ↓2">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Уже тысячу лет как изобретены корутины. Когда, конец, их внедрят в JS и перестанут изобретать всякие deffered, promises, async-await? </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8631899">  <li class="content-list__item content-list__item_comment js-comment " rel="8631905">
    
    <span class="parent_id" data-parent_id="8631899"></span>
    <div class="comment" id="comment_8631905">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631905">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 20:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631905" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631905" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631905" data-parent_id="8631899" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631899" class="icon_comment-arrow-up js-comment_parent" data-id="8631905" data-parent_id="8631899" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631905" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631905" data-parent_id="8631899" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631905" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как вы видите решение простейшей задачи — сделать 2 параллельных HTTP-запроса, дождаться их выполнения и вывести результат — на основе сопрограмм?<br>
<br>
А если надо вывести диалоговое окно (на html, не системное) и дождаться нажатия кнопки «ОК» — как вы будете действовать?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8631905">  <li class="content-list__item content-list__item_comment js-comment " rel="8632011">
    
    <span class="parent_id" data-parent_id="8631905"></span>
    <div class="comment" id="comment_8632011">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632011">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 22:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632011" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632011" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632011" data-parent_id="8631905" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631905" class="icon_comment-arrow-up js-comment_parent" data-id="8632011" data-parent_id="8631905" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632011" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632011" data-parent_id="8631905" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632011" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А какие проблемы?, посмотрите на GoLang, там «все в корутинах».</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8632011">  <li class="content-list__item content-list__item_comment js-comment " rel="8632035">
    
    <span class="parent_id" data-parent_id="8632011"></span>
    <div class="comment" id="comment_8632035">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632035">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 22:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632035" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632035" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632035" data-parent_id="8632011" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632011" class="icon_comment-arrow-up js-comment_parent" data-id="8632035" data-parent_id="8632011" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632035" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632035" data-parent_id="8632011" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632035" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Проблема в том, что сопрограммы сами по себе ничего не могут. Все равно нужны примитивы для асинхронности.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8632035">  <li class="content-list__item content-list__item_comment js-comment " rel="8632061">
    
    <span class="parent_id" data-parent_id="8632035"></span>
    <div class="comment" id="comment_8632061">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632061">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 23:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632061" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632061" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632061" data-parent_id="8632035" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632035" class="icon_comment-arrow-up js-comment_parent" data-id="8632061" data-parent_id="8632035" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632061" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632061" data-parent_id="8632035" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632061" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Все равно нужны примитивы для асинхронности.</blockquote>Все io вызовы идут «асинхронно», вот <a href="https://golang.org/pkg/sync/#example_WaitGroup">пример</a> параллельных http запросов.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8632061">  <li class="content-list__item content-list__item_comment js-comment " rel="8632077">
    
    <span class="parent_id" data-parent_id="8632061"></span>
    <div class="comment" id="comment_8632077">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632077">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 23:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632077" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632077" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632077" data-parent_id="8632061" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632061" class="icon_comment-arrow-up js-comment_parent" data-id="8632077" data-parent_id="8632061" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632077" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632077" data-parent_id="8632061" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632077" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ммм… я не вижу принципиальной разницы между использованием WaitGroup и Promise.all…<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> urls = [
    <span class="hljs-string"><span class="hljs-string">"http://www.golang.org/"</span></span>,
    <span class="hljs-string"><span class="hljs-string">"http://www.google.com/"</span></span>,
    <span class="hljs-string"><span class="hljs-string">"http://www.somestupidname.com/"</span></span>,
];

<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(urls.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) =&gt;</span></span> http.get(url)));
</code></pre><br>
<br>
Вообще горутины это чуть больше чем корутины… это корутины которые еще и по тредам распределяются автоматически в рантайме. Вот в python корутины есть уже давно и народ ноет что мол «не потоки».<br>
<br>
Для синхронного кода корутины без распределения по тредам профита не имеют, для асинхронного и для управления флоу async/await и промисы дают как по мне минимальную разницу в контексте языка построенного на event loop.<br>
<br>
Файберы это уже другое дело…</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8632077">  <li class="content-list__item content-list__item_comment js-comment " rel="8632095">
    
    <span class="parent_id" data-parent_id="8632077"></span>
    <div class="comment" id="comment_8632095">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632095">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 23:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632095" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632095" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632095" data-parent_id="8632077" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632077" class="icon_comment-arrow-up js-comment_parent" data-id="8632095" data-parent_id="8632077" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632095" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632095" data-parent_id="8632077" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632095" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>я не вижу принципиальной разницы между использованием</blockquote>В данном случае разницы нет, разница видна в большом приложении, когда одно написано в синхронном стиле, а второе обвешано промисами и колбеками, например если в синхронном «дереве» вызова появится асинхронная ф-ия, то все дерево придется перепиливать на async/promise а так же все связанные части проекта, когда с корутинами этого ничего делать не нужно.<br>
<br>
<blockquote>Для синхронного кода корутины без распределения по тредам профита не имеют</blockquote>Не знаю что вы имеете ввиду, но в Python есть gevent и greenlet и результат будет как от файберов, т.е. код синхронный, но работает асинхронно.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8632095">  <li class="content-list__item content-list__item_comment js-comment " rel="8632339">
    
    <span class="parent_id" data-parent_id="8632095"></span>
    <div class="comment" id="comment_8632339">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632339">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 07:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632339" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632339" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632339" data-parent_id="8632095" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632095" class="icon_comment-arrow-up js-comment_parent" data-id="8632339" data-parent_id="8632095" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632339" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632339" data-parent_id="8632095" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632339" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>например если в синхронном «дереве» вызова появится асинхронная ф-ия, то все дерево придется перепиливать на async/promise а так же все связанные части проекта, когда с корутинами этого ничего делать не нужно.</blockquote>Правильно ли я вас понимаю, что синхронное «дерево» остаётся синхронным, но необходимая часть выполняется асинхронно? Если да, то как это может работать не блокируя текущий поток? В JS он 1, всё таки.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8632339">  <li class="content-list__item content-list__item_comment js-comment " rel="8632345">
    
    <span class="parent_id" data-parent_id="8632339"></span>
    <div class="comment" id="comment_8632345">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632345">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 07:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632345" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632345" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632345" data-parent_id="8632339" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632339" class="icon_comment-arrow-up js-comment_parent" data-id="8632345" data-parent_id="8632339" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632345" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632345" data-parent_id="8632339" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632345" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, правильно.<br>
На пальцах например так: когда вы вызываете «блокирующий» метод http.Get, он запускается асинхронно и при этом поток переключается на другие задачи, когда другие задачи так же переключатся в «ожидание» и для вашего метода будет готов результат, то поток переключится обратно на ваш метод http.Get, вернет результат и ваш код пойдет работать дальше, для вас это будет как обычный синхронный код.<br>
В разных языках, библиотеках разные реализации но идея одна, посмотрите как работают файберы.<br>
<br>
Вот почему  <a href="http://habrahabr.ru/users/vintage/" class="user_link">vintage</a> говорит что async/await, yields, promise, callbacks… — это «прошлый век».<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8632345">  <li class="content-list__item content-list__item_comment js-comment " rel="8632361">
    
    <span class="parent_id" data-parent_id="8632345"></span>
    <div class="comment" id="comment_8632361">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632361">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632361" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632361" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632361" data-parent_id="8632345" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632345" class="icon_comment-arrow-up js-comment_parent" data-id="8632361" data-parent_id="8632345" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632361" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632361" data-parent_id="8632345" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632361" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>В разных языках, библиотеках разные реализации но идея одна, посмотрите как работают файберы.</blockquote>Года 3 назад я пытался использовать node-fibers. Работало оно крайне препогано. Часто падало с сегфолтами, существенные проблемы с отловом ошибок, практически невозможно было это дело как то дебажить. Может быть сейчас стало лучше.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8632361"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632347">
    
    <span class="parent_id" data-parent_id="8632339"></span>
    <div class="comment" id="comment_8632347">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632347">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 07:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632347" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632347" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632347" data-parent_id="8632339" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632339" class="icon_comment-arrow-up js-comment_parent" data-id="8632347" data-parent_id="8632339" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632347" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632347" data-parent_id="8632339" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632347" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Очень просто, корутина — это легковесный поток. Когда корутине нужно заблокироваться — она не блокирует системный поток, а переключает его на другой стек вызовов, позволяя ему продолжать обрабатывать события. И как только придёт нужное событие — происходит переключение обратно на стек корутины. Таким образом у нас получается много легковесных потоков в рамках одного системного потока, которые не жалко блокировать.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_8632347">  <li class="content-list__item content-list__item_comment js-comment " rel="8632357">
    
    <span class="parent_id" data-parent_id="8632347"></span>
    <div class="comment" id="comment_8632357">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632357">
          <a href="https://habr.com/ru/users/faiwer/" class="user-info user-info_inline" data-user-login="faiwer">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/571dfa4682a6ecdb85d401c43336bec0.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">faiwer</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632357" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632357" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632357" data-parent_id="8632347" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632347" class="icon_comment-arrow-up js-comment_parent" data-id="8632357" data-parent_id="8632347" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632357" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632357" data-parent_id="8632347" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632357" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вы меня запутали :)<br>
<br>
<blockquote>Таким образом у нас получается много легковесных потоков в рамках одного системного потока, которые не жалко блокировать.</blockquote>1. А как тут дело обстоит с гонками, дедлоками и пр.? Ведь если это легковесный поток, то это именно поток…<br>
2. Что-то мне подсказывает, что заморозить кадр в async-методе, и, когда нужно, разморозить его обратно ― должно быть гораздо дешевле, нежели запуск отдельного потока, пусть и легковесного. Так ли это?<br>
<br>
Или под «легковесным потоком» вы подразумеваете не настоящий поток, а его имитацию, которая только приостанавливает выполнение одного стека, возобновляя другой, стоящий в очереди? Если да, то чем это отличается от await?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8632357">  <li class="content-list__item content-list__item_comment js-comment " rel="8632389">
    
    <span class="parent_id" data-parent_id="8632357"></span>
    <div class="comment" id="comment_8632389">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632389">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632389" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632389" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632389" data-parent_id="8632357" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632357" class="icon_comment-arrow-up js-comment_parent" data-id="8632389" data-parent_id="8632357" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632389" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632389" data-parent_id="8632357" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632389" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">1. Проблемы синхронизации есть только в вытесняющей многозадачности, когда поток может быть остановлен в любое неожиданное для него месте, либо при одновременной работе нескольких потоков (на разных ядрах) с одним ресурсом. Корутины — это реализация кооперативной многозадачности, корутина блокируется только когда сама этого захочет.<br>
<br>
2. Запуск легковесного потока требует лишь выделить память под стек и всё, переключение между стеками — тривиальная операция.<br>
<br>
3. async создаёт «легковесный поток» для каждой функции.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_8632389">  <li class="content-list__item content-list__item_comment js-comment " rel="8632405">
    
    <span class="parent_id" data-parent_id="8632389"></span>
    <div class="comment" id="comment_8632405">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632405">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632405" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632405" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632405" data-parent_id="8632389" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632389" class="icon_comment-arrow-up js-comment_parent" data-id="8632405" data-parent_id="8632389" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632405" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632405" data-parent_id="8632389" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632405" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>3. async создаёт «легковесный поток» для каждой функции.</blockquote>Судя по тому что await — это «наследник» yield. То выходит что цикл обработчик создается в первой async ф-ии, и все дочерние async вызовы пробрасывают в него управление. Т.е. «легковесный поток» создается для «дерева» функций.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_8632405"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632415">
    
    <span class="parent_id" data-parent_id="8632389"></span>
    <div class="comment" id="comment_8632415">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632415">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 09:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632415" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632415" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632415" data-parent_id="8632389" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632389" class="icon_comment-arrow-up js-comment_parent" data-id="8632415" data-parent_id="8632389" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632415" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632415" data-parent_id="8632389" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632415" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Что выведет этот код?<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = { <span class="hljs-attr"><span class="hljs-attr">delta</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }

<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isDebug) trace(options);
increment(options)
increment(options)
increment(options)
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(counter);

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increment</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{
    counter = counter + options.delta;
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trace</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> object)
      (<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function"> =&gt;</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = object[key];
        <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(key, {
          <span class="hljs-attr"><span class="hljs-attr">get</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {
            sendEventToServer(<span class="hljs-string"><span class="hljs-string">"get"</span></span>, object, key, value);
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value;
          },
          <span class="hljs-attr"><span class="hljs-attr">set</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newValue</span></span></span><span class="hljs-function"> =&gt;</span></span> {
            sendEventToServer(<span class="hljs-string"><span class="hljs-string">"set"</span></span>, object, key, newValue);
            value = newValue;
          }, 
        });
      })(key)
}
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_8632415">  <li class="content-list__item content-list__item_comment js-comment " rel="8632427">
    
    <span class="parent_id" data-parent_id="8632415"></span>
    <div class="comment" id="comment_8632427">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632427">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 09:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632427" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632427" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632427" data-parent_id="8632415" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632415" class="icon_comment-arrow-up js-comment_parent" data-id="8632427" data-parent_id="8632415" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632427" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632427" data-parent_id="8632415" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632427" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">UPD: извиняюсь, совсем забыл. Три вызова increment надо запустить параллельно, а потом дождаться окончания их выполнения. В текущем виде будет 3 и только 3, параллельный вариант интереснее.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_8632427"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632395">
    
    <span class="parent_id" data-parent_id="8632357"></span>
    <div class="comment" id="comment_8632395">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632395">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632395" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632395" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632395" data-parent_id="8632357" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632357" class="icon_comment-arrow-up js-comment_parent" data-id="8632395" data-parent_id="8632357" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632395" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632395" data-parent_id="8632357" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632395" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>под «легковесным потоком» вы подразумеваете не настоящий поток, а его имитацию, которая только приостанавливает выполнение одного стека, возобновляя другой, стоящий в очереди?</blockquote>Да.<br>
<br>
<blockquote>чем это отличается от await</blockquote>в целом они работают похоже, но у await подхода есть проблемы вызова асинхронных функций из синхронных и наоборот, <a href="http://habrahabr.ru/company/mailru/blog/269465/#comment_8632095">проблема выше</a>, ну «захламление» кода, увеличение числа кейвордов. В общем случае у await нет преимуществ перед корутинами, корутины — это следующий шаг, после async/await.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_8632395"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632381">
    
    <span class="parent_id" data-parent_id="8632347"></span>
    <div class="comment" id="comment_8632381">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632381">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632381" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632381" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632381" data-parent_id="8632347" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632347" class="icon_comment-arrow-up js-comment_parent" data-id="8632381" data-parent_id="8632347" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632381" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632381" data-parent_id="8632347" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632381" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Кажется, вы путаете сопрограммы с легковесными потоками. Отличаются они наличием планировщика потоков (заметьте, термина «планировщик корутин» не существует!)<br>
<br>
Вот эта часть — <blockquote>Когда корутине нужно заблокироваться — она не блокирует системный поток, а переключает его на другой стек вызовов, позволяя ему продолжать обрабатывать события.</blockquote> — невозможна без планировщика потоков.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_8632381">  <li class="content-list__item content-list__item_comment js-comment " rel="8632399">
    
    <span class="parent_id" data-parent_id="8632381"></span>
    <div class="comment" id="comment_8632399">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632399">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632399" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632399" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632399" data-parent_id="8632381" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632381" class="icon_comment-arrow-up js-comment_parent" data-id="8632399" data-parent_id="8632381" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632399" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632399" data-parent_id="8632381" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632399" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Простейший планировщик потоков — event-loop — есть всегда.<br>
<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_8632399">  <li class="content-list__item content-list__item_comment js-comment " rel="8632431">
    
    <span class="parent_id" data-parent_id="8632399"></span>
    <div class="comment" id="comment_8632431">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632431">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 09:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632431" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632431" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632431" data-parent_id="8632399" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632399" class="icon_comment-arrow-up js-comment_parent" data-id="8632431" data-parent_id="8632399" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632431" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632431" data-parent_id="8632399" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632431" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Есть-то он есть, но сопрограммы не используют планировщик потоков. Даже простейший. Иначе они уже не сопрограммы, а легковесные потоки.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_8632431">  <li class="content-list__item content-list__item_comment js-comment " rel="8633547">
    
    <span class="parent_id" data-parent_id="8632431"></span>
    <div class="comment" id="comment_8633547">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8633547">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 18:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8633547" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8633547" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8633547" data-parent_id="8632431" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632431" class="icon_comment-arrow-up js-comment_parent" data-id="8633547" data-parent_id="8632431" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8633547" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8633547" data-parent_id="8632431" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8633547" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Человек не использует колёса для передвижения. Даже одно. Иначе это уже не человек, а инвалид.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_8633547"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632319">
    
    <span class="parent_id" data-parent_id="8632061"></span>
    <div class="comment" id="comment_8632319">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632319">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 07:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632319" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632319" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632319" data-parent_id="8632061" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632061" class="icon_comment-arrow-up js-comment_parent" data-id="8632319" data-parent_id="8632061" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632319" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632319" data-parent_id="8632061" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632319" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Кажется, вы путаете «корутины» и «горутины». Вторые на Javascript невозможны в принципе — это однопоточный язык, и очень много кода на эту самую однопоточность завязано.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8632319">  <li class="content-list__item content-list__item_comment js-comment " rel="8632343">
    
    <span class="parent_id" data-parent_id="8632319"></span>
    <div class="comment" id="comment_8632343">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632343">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 07:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632343" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632343" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632343" data-parent_id="8632319" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632319" class="icon_comment-arrow-up js-comment_parent" data-id="8632343" data-parent_id="8632319" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632343" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632343" data-parent_id="8632319" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632343" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Горутины — это корутины в Го, сотни корутин могут работать в одном потоке (для этого они и задумывались). А <a href="https://github.com/laverdet/node-fibers">вот</a> модуль для node.js — возможность использования корутин/файберов в javascript.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8632343">  <li class="content-list__item content-list__item_comment js-comment " rel="8632387">
    
    <span class="parent_id" data-parent_id="8632343"></span>
    <div class="comment" id="comment_8632387">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632387">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29 октября 2015 в 08:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632387" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632387" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632387" data-parent_id="8632343" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632343" class="icon_comment-arrow-up js-comment_parent" data-id="8632387" data-parent_id="8632343" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632387" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632387" data-parent_id="8632343" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632387" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="http://www.golangpatterns.info/concurrency/coroutines">www.golangpatterns.info/concurrency/coroutines</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_8632387"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8631907">
    
    <span class="parent_id" data-parent_id="8631899"></span>
    <div class="comment" id="comment_8631907">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8631907">
          <a href="https://habr.com/ru/users/Fesor/" class="user-info user-info_inline" data-user-login="Fesor">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/7c2c5be7d0097a75ac39ef5f31dc76f4.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fesor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 20:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631907" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8631907" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8631907" data-parent_id="8631899" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631899" class="icon_comment-arrow-up js-comment_parent" data-id="8631907" data-parent_id="8631899" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631907" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8631907" data-parent_id="8631899" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8631907" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да как бы генераторы включены в стандарт ES2015, который уже принят, а с полифилами и babel.js работает и на ES5. Есть реализации, если вы почитаете комментарии в ветке, и даже не одна.<br>
<br>
<blockquote> async-await?</blockquote><br>
async/await вы в этот список всетаки зря вписали так как по сути своей это синтаксический сахар для корутин при работе с асинхронными функциями. И для 90% юзкейсов это более чем удобный вариант. </div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8631907">  <li class="content-list__item content-list__item_comment js-comment " rel="8632045">
    
    <span class="parent_id" data-parent_id="8631907"></span>
    <div class="comment" id="comment_8632045">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632045">
          <a href="https://habr.com/ru/users/vintage/" class="user-info user-info_inline" data-user-login="vintage">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/6d7f0d0390714cdc075136a127ac4bd9.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vintage</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 22:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632045" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632045" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632045" data-parent_id="8631907" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631907" class="icon_comment-arrow-up js-comment_parent" data-id="8632045" data-parent_id="8631907" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632045" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632045" data-parent_id="8631907" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632045" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Это скорее синтаксический сахар для генераторов. Корутины от генераторов отличаются наличием стека.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8632045">  <li class="content-list__item content-list__item_comment js-comment " rel="8632085">
    
    <span class="parent_id" data-parent_id="8632045"></span>
    <div class="comment" id="comment_8632085">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632085">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 23:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632085" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632085" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632085" data-parent_id="8632045" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632045" class="icon_comment-arrow-up js-comment_parent" data-id="8632085" data-parent_id="8632045" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632085" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632085" data-parent_id="8632045" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632085" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вообще, я потыкал Babel — в js async-await не так плох как в «синхронных» языках, т.к. в основе event-loop.<br>
 — Из async ф-ии можно вызвать обычную, и эта обычная ф-ия может сработать как async (т.е. создать задержку) если вернуть Promise<br>
 — Из обычной ф-ии можно вызвать async ф-ию и она запуститься асинхронно, но возможно есть/будет способ навесить callback<br>
 — Исключения, вроде, работают как ожидается, правда traceback теряется.<br>
<br>
Ну и естественно ничего не заблочится, конечно это не корутины, но в полне себе не плохо.<br>
</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8632085"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8632007">
    
    <span class="parent_id" data-parent_id="8631899"></span>
    <div class="comment" id="comment_8632007">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8632007">
          <a href="https://habr.com/ru/users/lega/" class="user-info user-info_inline" data-user-login="lega">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">lega</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">28 октября 2015 в 22:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632007" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8632007" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8632007" data-parent_id="8631899" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8631899" class="icon_comment-arrow-up js-comment_parent" data-id="8632007" data-parent_id="8631899" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="https://habr.com/ru/company/mailru/blog/269465/#comment_8632007" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8632007" data-parent_id="8631899" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8632007" data-post-target="269465" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled=""><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Есть патч для V8 который реализует файберы, но его наверно никогда не примут.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8632007"></ul>
  </li>
</ul>
  </li>

      
    </ul>
    <div class="js-form_placeholder">
              <p class="for_users_only_msg">Только&nbsp;<a href="https://habr.com/info/help/registration/">полноправные пользователи</a> могут оставлять комментарии. <a href="https://habr.com/ru/auth/login/">Войдите</a>, пожалуйста.</p>

    </div>
  </div>


      </div>
    </div>

    <div class="sidebar_right sidebar_content-area sticky_init">
      
        
  <div class="default-block default-block_sidebar">
  <div class="default-block__header">
    <h2 class="default-block__header-title">Информация</h2>
  </div>
  <div class="default-block__content default-block__content_profile-summary">
      <ul class="defination-list">
          <li class="defination-list__item defination-list__item_profile-summary">
            <h3 class="defination-list__label defination-list__label_profile-summary">Дата основания</h3>
            <span class="defination-list__value">15 октября 1998 г.</span>
          </li>

          <li class="defination-list__item defination-list__item_profile-summary">
            <h3 class="defination-list__label defination-list__label_profile-summary">Локация</h3>
            <span class="defination-list__value">
              Москва<br>Россия
            </span>
          </li>

          <li class="defination-list__item defination-list__item_profile-summary">
            <h3 class="defination-list__label defination-list__label_profile-summary">Сайт</h3>
            <span class="defination-list__value"><a href="http://corp.mail.ru/" target="_blank" class="defination-list__link" title="http://corp.mail.ru/" rel=" noopener">corp.mail.ru</a></span>
          </li>

          <li class="defination-list__item defination-list__item_profile-summary">
            <h3 class="defination-list__label defination-list__label_profile-summary">Численность</h3>
            <span class="defination-list__value">свыше 5000 человек</span>
          </li>

          <li class="defination-list__item defination-list__item_profile-summary">
            <h3 class="defination-list__label defination-list__label_profile-summary">Дата регистрации</h3>
            <span class="defination-list__value">9 августа 2008 г.</span>
          </li>

          <li class="defination-list__item defination-list__item_profile-summary">
              <h3 class="defination-list__label defination-list__label_profile-summary">Представитель</h3>
              <span class="defination-list__value"><a title="Павел Круглов" href="https://habr.com/ru/users/pkruglov/">Павел Круглов</a></span>
          </li>
      </ul>
  </div>
</div>

  

        <div class="default-block default-block_sidebar">
    <div class="default-block__header">
      <h2 class="default-block__header-title">Ссылки</h2>
    </div>
    <div class="default-block__content">
      <ul class="content-list content-list_company-links">
          <li class="content-list__item content-list__item_company-links company-links">
            <a href="https://geekbrains.ru/" class="company-links__title">GeekBrains — обучающий портал для программистов</a>
            <div class="company-links__link">geekbrains.ru</div>
          </li>
          <li class="content-list__item content-list__item_company-links company-links">
            <a href="https://github.com/mailru" class="company-links__title">OpenSource Mail.Ru — открытые проекты компании</a>
            <div class="company-links__link">github.com</div>
          </li>
          <li class="content-list__item content-list__item_company-links company-links">
            <a href="https://www.youtube.com/user/TPMGTU/" class="company-links__title">Технострим Mail.Ru Group — официальный канал образовательных проектов</a>
            <div class="company-links__link">www.youtube.com</div>
          </li>
          <li class="content-list__item content-list__item_company-links company-links">
            <a href="https://mcs.mail.ru/" class="company-links__title">Mail.Ru Cloud Solutions — облачная инфраструктура для бизнеса</a>
            <div class="company-links__link">mcs.mail.ru</div>
          </li>
      </ul>
    </div>
  </div>
















      <div class="default-block default-block_sidebar">
  <div class="default-block__header">
    <h2 class="default-block__header-title">Приложения</h2>
  </div>
  <div class="default-block__content">
    <ul class="content-list content-list_company-wjt" id="company-wjt">
        <li class="content-list__item content-list__item_company-wjt ">
          <div class="media-obj company-app">
  <div class="media-obj__image media-obj__image_company-wjt">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/51a48bf0d0f2fc1483902434db1b7df0.jpg" class="company-app__image" width="48" height="48">
  </div>
  <div class="media-obj__body media-obj__body_company-wjt">
    <h3 class="company-app__title">Официальное почтовое приложение Mail.Ru</h3>
    <div class="company-app__description"> — поддержка всех почтовых сервисов (Mail.Ru, Yandex, Google, Yahoo, AOL);<br>
 — удобный и быстрый интерфейс;<br>
 — аватарки и иконки в списке писем;<br>
 — моментальные уведомления о письмах.</div>
  </div>
</div>
<ul class="app-links">
    <li class="app-links__item">
      <a href="http://ad.apps.fm/fBVfHoO3i6OlU2MMEGL2ePE7og6fuV2oOMeOQdRqrE0BjvL62TknM2lWPohJeJgXvycrVO0znLlJmfhrzPSjAl3EbChBR24B0brMQRziE4Q" class="app-links__item-link">
        <span class="app-links__item-name">iOS</span>
      </a>
    </li>
    <li class="app-links__item">
      <a href="http://app.appsflyer.com/ru.mail.mailapp?pid=web&amp;c=habrahabr" class="app-links__item-link">
        <span class="app-links__item-name">Android</span>
      </a>
    </li>
</ul>

        </li>
        <li class="content-list__item content-list__item_company-wjt ">
          <div class="media-obj company-app">
  <div class="media-obj__image media-obj__image_company-wjt">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/daafe4a607139b14e18a31ef7a465e8a.png" class="company-app__image" width="48" height="48">
  </div>
  <div class="media-obj__body media-obj__body_company-wjt">
    <h3 class="company-app__title">Офлайн карты MAPS.ME</h3>
    <div class="company-app__description">— автомобильная и пешеходная навигация<br>
— поиск по адресам, категориям, названиям и координатам<br>
— высокая детализация по всему миру<br>
— импорт\экспорт меток</div>
  </div>
</div>
<ul class="app-links">
    <li class="app-links__item">
      <a href="https://play.google.com/store/apps/details?id=com.mapswithme.maps.pro" class="app-links__item-link">
        <span class="app-links__item-name">Android</span>
      </a>
    </li>
    <li class="app-links__item">
      <a href="https://itunes.apple.com/us/app/maps.me-offline-map-routing/id510623322" class="app-links__item-link">
        <span class="app-links__item-name">iOS</span>
      </a>
    </li>
</ul>

        </li>
        <li class="content-list__item content-list__item_company-wjt ">
          <div class="media-obj company-app">
  <div class="media-obj__image media-obj__image_company-wjt">
    <img src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/f2af8b3db4539dd4f741b5f7392e261c.png" class="company-app__image" width="48" height="48">
  </div>
  <div class="media-obj__body media-obj__body_company-wjt">
    <h3 class="company-app__title">ВКонтакте</h3>
    <div class="company-app__description">ВКонтакте — это социальная сеть для быстрой и удобной коммуникации между людьми по всему миру.</div>
  </div>
</div>
<ul class="app-links">
    <li class="app-links__item">
      <a href="https://play.google.com/store/apps/details?id=com.vkontakte.android" class="app-links__item-link">
        <span class="app-links__item-name">Android</span>
      </a>
    </li>
    <li class="app-links__item">
      <a href="https://itunes.apple.com/ru/app/vk-app/id564177498?mt=8" class="app-links__item-link">
        <span class="app-links__item-name">iOS</span>
      </a>
    </li>
</ul>

        </li>
    </ul>
  </div>
</div>





    <div class="js-ad_sticky">
    <div class="default-block">
      <div class="default-block__header">
        <h2 class="default-block__header-title">Блог на Хабре</h2>
      </div>
      <div class="default-block__content">
        <ul class="content-list">
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/463063/" class="post-info__title">Разбираемся с интерфейсами в Go</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">4,8k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/463063/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">8</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462817/" class="post-info__title">Отчет Kotlin / Everywhere — Showcase practice: 31 июля</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2,7k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462817/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462311/" class="post-info__title">Подборка @pythonetc, июль 2019</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">5,1k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462311/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">8</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462811/" class="post-info__title">Зачем нужны дженерики в Go?</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">12,4k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462811/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">207</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462407/" class="post-info__title">Дайджест продуктового дизайна, июль 2019</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2,8k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462407/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462169/" class="post-info__title">Дайджест новостей машинного обучения и искусственного интеллекта за июль</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">7,1k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462169/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/462277/" class="post-info__title">Техновыпуск Mail.ru Group 2019</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2,9k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/462277/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461907/" class="post-info__title">Продуктовая аналитика в студии полного цикла</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">4,5k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461907/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461927/" class="post-info__title">Активное обучение ранжированию</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">4,1k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461927/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">7</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461207/" class="post-info__title">Сисадмины, сегодня наш день</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">5,5k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461207/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">8</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461321/" class="post-info__title">Модели дженериков и метапрограммирования: Go, Rust, Swift, D и другие</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">15,4k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461321/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">14</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461155/" class="post-info__title">Облако для благотворительных фондов: руководство по миграции</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">1,7k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461155/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/461191/" class="post-info__title">Записи выступлений с летнего DIYorDIE Meetup 16 июня</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">3,7k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/461191/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">0</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/460555/" class="post-info__title">Отчет с PyDaCon meetup в Mail.ru Group, 22 июня</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">3,1k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/460555/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">4</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/460665/" class="post-info__title">Черновик FAQ: Почему стандарты С++ выходят каждые три года?</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">8,7k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/460665/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">26</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/460133/" class="post-info__title">Kotlin / Everywhere — Showcase practice: 31 июля</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2,8k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/460133/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">2</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/460307/" class="post-info__title">Опыт моделеварения от команды Computer Vision Mail.ru</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">5,3k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/460307/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">8</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/459464/" class="post-info__title">Lua in Moscow 2019: интервью с Роберто Иерусалимским</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">3,5k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/459464/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">7</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/460115/" class="post-info__title">Десять лет программирования на Erlang</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">12,5k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/460115/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">11</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
                <h3 class="post-info__title">
                  <a href="https://habr.com/ru/company/mailru/blog/458414/" class="post-info__title">Как изменить карьеру, стать frontend-разработчиком в 30 лет и работать в свое удовольствие</a>
                </h3>
              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">13,9k</span>
                </span>

                <a href="https://habr.com/ru/company/mailru/blog/458414/#comments" class="post-info__meta-item" rel="nofollow">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">20</span>
                </a>
              </div>
            </li>
        </ul>
      </div>
    </div>
  </div>

  

    </div>
  </div>

  

  <script type="text/javascript">
    var userLabel = 'reader';
  </script>

        </div>
      </div>

        <div class="layout__row layout__row_promo-blocks">
          <div class="layout__cell">
              <div class="column-wrapper column-wrapper_bottom column-wrapper_bordered">
    <div class="content_left">
      

  <div class="default-block default-block_content">
    <div class="default-block__header default-block__header_large">
      <h2 class="default-block__header-title default-block__header-title_large">Самое читаемое</h2>
    </div>
    <div class="default-block__content default-block__content_most-read" id="broadcast_tabs_posts">
      <ul class="toggle-menu toggle-menu__most-read">
        <li class="toggle-menu__item">
          <a href="https://habr.com/ru/company/mailru/blog/269465/#broadcast_posts_today" class="toggle-menu__item-link active" rel="nofollow">Сутки</a>
        </li>
        <li class="toggle-menu__item">
          <a href="https://habr.com/ru/company/mailru/blog/269465/#broadcast_posts_week" class="toggle-menu__item-link" rel="nofollow">Неделя</a>
        </li>
        <li class="toggle-menu__item">
          <a href="https://habr.com/ru/company/mailru/blog/269465/#broadcast_posts_month" class="toggle-menu__item-link" rel="nofollow">Месяц</a>
        </li>
      </ul>

        <div class="tabs__content tabs__content_reading" id="broadcast_posts_today" style="display: block;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/462969/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;today&#39;); }">Как власти Казахстана пытаются прикрыть свой провал с внедрением сертификата</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+95</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">81,1k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">46</span>
                    </span>
                    <a href="https://habr.com/ru/post/462969/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">63</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/463163/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;today&#39;); }">Face ID на iPhone можно обмануть очками и изолентой (не синей)</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+2</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">10,2k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">7</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/463163/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">19</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/wrike/blog/462787/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;today&#39;); }">Как приручить джуниора?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+1</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">9,7k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">67</span>
                    </span>
                    <a href="https://habr.com/ru/company/wrike/blog/462787/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">96</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/462889/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;today&#39;); }">История с продолжением: собственный компилятор Паскаля для Windows с чистого листа</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+45</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">8,4k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">44</span>
                    </span>
                    <a href="https://habr.com/ru/post/462889/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">50</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/jetinfosystems/blog/463037/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;today&#39;); }">В поисках вдохновения, или Как вытащить себя из Ж</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+41</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">17k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">134</span>
                    </span>
                    <a href="https://habr.com/ru/company/jetinfosystems/blog/463037/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">40</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_week" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/462969/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;week&#39;); }">Как власти Казахстана пытаются прикрыть свой провал с внедрением сертификата</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+95</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">81,1k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">46</span>
                    </span>
                    <a href="https://habr.com/ru/post/462969/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">63</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/ruvds/blog/462483/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;week&#39;); }">Функциональное программирование: дурацкая игрушка, которая убивает производительность труда. Часть 1</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+34</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">48,3k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">156</span>
                    </span>
                    <a href="https://habr.com/ru/company/ruvds/blog/462483/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">368</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/462771/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;week&#39;); }">Им было нечего скрывать</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+85</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">48k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">143</span>
                    </span>
                    <a href="https://habr.com/ru/post/462771/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">299</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/462403/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;week&#39;); }">Выбор размера монитора: теория угловых размеров, обоснование и сравнение</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+66</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">47,9k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">245</span>
                    </span>
                    <a href="https://habr.com/ru/post/462403/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">228</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/oleg-bunin/blog/462505/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;week&#39;); }">Не морочьте мне голову со своим функциональным программированием</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+80</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">45,9k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">229</span>
                    </span>
                    <a href="https://habr.com/ru/company/oleg-bunin/blog/462505/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">201</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_month" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/460901/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;month&#39;); }">Почему Senior Developer'ы не могут устроиться на работу</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+137</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">110k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">311</span>
                    </span>
                    <a href="https://habr.com/ru/post/460901/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">897</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/medium-isp/blog/461979/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;month&#39;); }">Дорогая, мы убиваем Интернет</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+299</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">105k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">601</span>
                    </span>
                    <a href="https://habr.com/ru/company/medium-isp/blog/461979/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">916</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/461745/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;month&#39;); }">Цены российского черного рынка на пробив персональных данных (плюс ответ на ответ Тинькофф Банка)</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+242</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">98,5k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">221</span>
                    </span>
                    <a href="https://habr.com/ru/post/461745/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">299</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/toshibarus/blog/462185/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;month&#39;); }">Революция закончилась. Есть ли альтернатива литий-ионному аккумулятору?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+153</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">86,1k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">185</span>
                    </span>
                    <a href="https://habr.com/ru/company/toshibarus/blog/462185/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">220</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/459544/" class="post-info__title post-info__title_large" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;most_read&#39;, &#39;month&#39;); }">Почему сериал «Чернобыль» настолько плохо описал ядерную энергию</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+101</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">85k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">163</span>
                    </span>
                    <a href="https://habr.com/ru/post/459544/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">691</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

    </div>

    <div class="sidebar_right">
    </div>
  </div>

          </div>
        </div>

      <div class="layout__row layout__row_footer-links">
        <div class="layout__cell">
          <div class="footer-grid footer-grid_menu">
  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">
      Ваш аккаунт
    </h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/auth/login/" class="footer-menu__item-link">Войти</a>
          </li>
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/auth/register/" class="footer-menu__item-link">Регистрация</a>
          </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Разделы</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/posts/top/" class="footer-menu__item-link">Публикации</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/news/" class="footer-menu__item-link">Новости</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">Хабы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/companies/" class="footer-menu__item-link">Компании</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/users/" class="footer-menu__item-link">Пользователи</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">Песочница</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Информация</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/help/rules/" class="footer-menu__item-link">Правила</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/help/" class="footer-menu__item-link">Помощь</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/topics/madskillz/" class="footer-menu__item-link">Документация</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/agreement/?hl=ru_RU" class="footer-menu__item-link">Соглашение</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/confidential/?hl=ru_RU" class="footer-menu__item-link">Конфиденциальность</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Услуги</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/advertising/" target="_blank" class="footer-menu__item-link" rel=" noopener">Реклама</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/corpblog/" target="_blank" class="footer-menu__item-link" rel=" noopener">Тарифы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/content/" target="_blank" class="footer-menu__item-link" rel=" noopener">Контент</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/workshops/" target="_blank" class="footer-menu__item-link" rel=" noopener">Семинары</a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="footer-misprints">
  Если нашли опечатку в&nbsp;посте, выделите ее&nbsp;и&nbsp;нажмите Ctrl+Enter, чтобы сообщить автору.
</div>

        </div>
      </div>

      <div class="layout__row layout__row_footer">
        <div class="layout__cell">
          <div class="footer-grid footer">
  <div class="footer-grid__item footer-grid__item_copyright">
    <span class="footer__copyright">© 2006 – 2019 «<a href="https://tmtm.ru/" class="footer__link">TM</a>»</span>
  </div>
    <div class="footer-grid__item footer-grid__item_link footer-grid__item_lang">
      <svg class="icon-svg icon-svg_lang-footer" width="16" height="16">
        <use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#globus"></use>
      </svg>
      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="footer__link js-show_lang_settings">Настройка языка</a>
    </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://habr.com/ru/about/" class="footer__link">О сайте</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
    <a href="https://habr.com/ru/feedback/" class="footer__link">Служба поддержки</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://m.habr.com/post/269465/?mobile=yes" class="footer__link">Мобильная версия</a>
  </div>

  <div class="footer-grid__item footer-grid__item_social">
    <ul class="social-icons">
      <li class="social-icons__item">
        <a href="https://twitter.com/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;twitter&#39;); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://www.facebook.com/habrahabr.ru" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;facebook&#39;); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"></path></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://vk.com/habr" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;vkontakte&#39;); }" rel=" noopener">
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"></path></svg>
          </a>
        </li>
      <li class="social-icons__item">
        <a href="https://telegram.me/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;telegram&#39;); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"></path></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_youtube" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;youtube&#39;); }" rel=" noopener">
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="32" height="32" viewBox="0 0 32 32"><path d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2zm18.133 16l-10.667-5.333v10.667l10.667-5.333z"></path></svg>

          </a>
        </li>
        <li class="social-icons__item">
          <a href="https://zen.yandex.ru/habr" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_zen" target="_blank" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;footer&#39;, &#39;Social_icons&#39;, &#39;zen&#39;); }" rel=" noopener">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#f00" d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2z"></path><path fill="#d00000" d="M13.661 32h-6.157l12.409-9.537 2.44 2.811-8.693 6.726zm3.782-32h5.883l-10.515 8.777-2.44-2.811 7.072-5.966z"></path><path fill="#f8b3b2" d="M10.4 17.879l9.474-7.314 2.441 2.812-9.475 7.314z"></path><path fill="#fff" d="M10.417 5.954l11.909 3.897v3.543l-11.909-3.897v-3.543zm0 11.909l11.909 3.897v3.543l-11.909-3.897v-3.543z"></path></svg>

          </a>
        </li>
    </ul>
  </div>
</div>

        </div>
      </div>

      <a href="https://habr.com/ru/company/mailru/blog/269465/#" class="layout__elevator" id="scroll_to_top" title="Наверх" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;navigation_button&#39;, &#39;down&#39;); }">
        <svg class="icon-svg icon-svg_scroll-up" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M16 0C7.164 0 0 7.164 0 16s7.164 16 16 16 16-7.164 16-16S24.836 0 16 0zm8.412 19.523c-.517.512-1.355.512-1.872 0L16 13.516l-6.54 6.01c-.518.51-1.356.51-1.873 0-.516-.513-.517-1.343 0-1.855l7.476-7.326c.517-.512 1.356-.512 1.873 0l7.476 7.327c.516.513.516 1.342 0 1.854z"></path></svg>
      </a>
    </div>

    <div class="overlay hidden" id="js-lang_settings">
  <div class="popup">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title js-popup_title" data-section="1">Настройка языка</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_lang_settings">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/images/1565355695/common-svg-sprite.svg#close"></use>
        </svg>
      </button>
    </div>
    <div class="popup__body">
      <form action="https://habr.com/json/settings/i18n/" method="post" class="form form_lang-settings" id="lang-settings-form">
        <fieldset class="form__fieldset form__fieldset_thin" data-section="2">
          <legend class="form__legend form__legend_lang-settings js-popup_hl_legend">Интерфейс</legend>
            <div class="form-field form-field_lang-settings">
              <label class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_ru" class="radio__input js-hl_langs" value="ru" checked="">
                <span class="radio__label radio__label_another">Русский</span>
              </label>
            </div>
            <div class="form-field form-field_lang-settings">
              <label class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_en" class="radio__input js-hl_langs" value="en">
                <span class="radio__label radio__label_another">English</span>
              </label>
            </div>
        </fieldset>

        <fieldset class="form__fieldset form__fieldset_thin">
          <legend class="form__legend form__legend_lang-settings js-popup_fl_legend" data-section="3">Язык публикаций</legend>
            <div class="form-field form-field_lang-settings">
              <label class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_ru" class="checkbox__input js-fl_langs" value="ru" checked="">
                <span class="checkbox__label checkbox__label_another js-popup_feed_ru">Русский</span>
              </label>
            </div>
            <div class="form-field form-field_lang-settings">
              <label class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_en" class="checkbox__input js-fl_langs" value="en">
                <span class="checkbox__label checkbox__label_another js-popup_feed_en">Английский</span>
              </label>
            </div>
        </fieldset>

        <div class="form__footer form__footer_lang-settings">
          <button type="submit" class="btn btn_blue btn_huge btn_full-width js-popup_save_btn">Сохранить настройки</button>
        </div>
      </form>
    </div>
  </div>
</div>



    <script type="text/javascript">
  // global vars
  var g_base_url = 'habr.com/ru';
  var g_base_fullurl = 'https://habr.com/ru/';
  var g_tmid_fullurl = 'https://account.habr.com/';
  var g_is_guest = false;
  var g_show_xpanel = false;
  var g_is_enableShortcuts = '1';
    var g_current_hl = 'ru';
    var g_current_fl = 'ru';

</script>

    <script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/vendors.bundle.js.Без названия"></script>
    <script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/main.bundle.js.Без названия"></script>
      <script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    showProcessingMessages: false,
    showMathMenu: true,
    tex2jax: {
      inlineMath: [['$inline$','$inline$']],
      displayMath: [['$$display$$','$$display$$']],
      processEscapes: true
    },
    MathMenu: {
      showRenderer: true,
      showContext:  true
    }
  });

  MathJax.Extension.Img2jax = {
    PreProcess: function (element) {
      var hasMath = false;
      var images = element.querySelectorAll('[data-tex]');
      for (var i = images.length - 1; i >= 0; i--) {
        var img = images[i];
        var tex = img.alt.replace(/(\r\n|\n|\r)/gm, " ");
        if (tex && tex[0] === '$'){
          var script = document.createElement("script"); script.type = "math/tex";
          hasMath = true;
          if (img.getAttribute('data-tex') == "display"){script.type += ";mode=display"}
          MathJax.HTML.setScript(script, tex.substring(1,tex.length-1));
          img.parentNode.replaceChild(script,img);
        }
      }
    }
  };

  MathJax.Hub.Register.PreProcessor(["PreProcess", MathJax.Extension.Img2jax]);
</script>

<script type="text/javascript" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/MathJax.js.Без названия">
</script>

  <script type="text/javascript" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/highlight.pack.js.Без названия"></script>
  <script type="text/javascript" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/highlight.langs.js.Без названия"></script>


      <script src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/check-login.js.Без названия"></script>

      <script type="text/javascript" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/saved_resource(1)"></script>

    
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            if (typeof (_yaparams) != 'undefined') {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    params:_yaparams});
            } else {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
            }

        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

    <!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');

    fbq('init', '317458588730613');
    fbq('track', 'PageView');
</script>
<noscript>
        <img height="1" width="1" src="https://www.facebook.com/tr?id=317458588730613&ev=PageView&noscript=1"/>
</noscript>
<!-- End Facebook Pixel Code -->
    
  

<div id="AutocompleteContainter_d5c8b" style="position: absolute; z-index: 9999; top: 0px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_d5c8b" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="AutocompleteContainter_14cde" style="position: absolute; z-index: 9999; top: 38px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_14cde" style="display: none; width: 300px; max-height: 400px;"></div></div></div><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/widget_iframe.0639d67d95b7680840758b6833f06d87.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./У нас проблемы с промисами _ Блог компании Mail.ru Group _ Хабр_files/saved_resource.html"></iframe></body></html>